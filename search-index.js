crystal_doc_search_index_callback({"repository_name":"stackcoin","body":"[![Documentation badge](https://img.shields.io/badge/docs-latest-green.svg?style=flat-square)](https://jackharrhy.github.io/StackCoin/) ![Deploy to Dockerhub badge](https://github.com/jackharrhy/StackCoin/workflows/Deploy%20to%20Dockerhub/badge.svg)\n\n# StackCoin\n\n![StackCoin coin of Stack on coin](https://i.imgur.com/ou12BG6.png)\n\n_a discord pseudo currency, written using [discordcr](https://github.com/discordcr/discordcr)_\n\n![Creator of StackCoin running commands in a private guild, showing the different usages of the bot, such as collecting a daily dole, sending StackCoin to other users, checking a graph of data showing their balance over time, and the leaderboard of the current highest balances of the top 5 accounts](https://i.imgur.com/alF7EcU.png)\n\n---\n\n## Requirements:\n\n- crystal 0.35+\n- sqlite3, development variant\n\n## Running:\n\n```sh\ncp .env.dist .env # then populate .env\n\nshards # install deps\n\ncrystal run src/stackcoin.cr # run bot!\n```\n\n---\n\n## Contributors:\n\n- [jackharrhy](https://github.com/jackharrhy) - creator, maker of most\n- [z64](https://github.com/z64) - made small typo fix, and fixed the specs running, but also maintainer of discordcr, and wrote code that has influenced this bot heavily\n- [Mudkip](https://github.com/Mudkip) - wrote the `s!unban` command, since he was banned for a short period of time while the feature did not exist :)\n- [SteveParson](https://github.com/SteveParson) - wrote the first iteration of the `s!leaderboard` command\n- [jonyick](https://github.com/jonyick) - increased the max value that can be sent in a single transaction from `10k` -> `100k`\n- [ranguli](https://github.com/ranguli) - removed the header in the readme as a meme\n- [rfh473](https://github.com/rfh473) - gave some much needed feedback on the impl. of how stackcoin parses `$` as `s`\n\n---\n\n```txt\n[11:09] stack: i hate it\n```\n","program":{"html_id":"stackcoin/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"stackcoin","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/CrystalLogHandler","path":"CrystalLogHandler.html","kind":"class","full_name":"CrystalLogHandler","name":"CrystalLogHandler","abstract":false,"superclass":{"html_id":"stackcoin/Kemal/BaseLogHandler","kind":"class","full_name":"Kemal::BaseLogHandler","name":"BaseLogHandler"},"ancestors":[{"html_id":"stackcoin/Kemal/BaseLogHandler","kind":"class","full_name":"Kemal::BaseLogHandler","name":"BaseLogHandler"},{"html_id":"stackcoin/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/log.cr","line_number":20,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/log.cr#L20"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(log=::Log.for(&quot;kemal&quot;))-class-method","html_id":"new(log=::Log.for(&quot;kemal&quot;))-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"log","doc":null,"default_value":"::Log.for(\"kemal\")","external_name":"log","restriction":""}],"args_string":"(log = <span class=\"t\">::</span><span class=\"t\">Log</span>.<span class=\"k\">for</span>(<span class=\"s\">&quot;kemal&quot;</span>))","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/log.cr#L21","def":{"name":"new","args":[{"name":"log","doc":null,"default_value":"::Log.for(\"kemal\")","external_name":"log","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(log)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"call(context:HTTP::Server::Context)-instance-method","html_id":"call(context:HTTP::Server::Context)-instance-method","name":"call","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"HTTP::Server::Context"}],"args_string":"(context : HTTP::Server::Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/log.cr#L24","def":{"name":"call","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"HTTP::Server::Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"elapsed_time = Time.measure do\n  call_next(context)\nend\nelapsed_text = elapsed_text(elapsed_time)\n@log.info do\n  \"#{Time.utc}  #{context.response.status_code} #{context.request.method} #{context.request.resource} #{elapsed_text}\"\nend\ncontext\n"}},{"id":"write(message:String)-instance-method","html_id":"write(message:String)-instance-method","name":"write","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":"String"}],"args_string":"(message : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/log.cr#L31","def":{"name":"write","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@log.info do\n  message\nend"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin","path":"StackCoin.html","kind":"module","full_name":"StackCoin","name":"StackCoin","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/stackcoin/const.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/const.cr#L1"},{"filename":"src/stackcoin/log.cr","line_number":5,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/log.cr#L5"},{"filename":"src/stackcoin/result.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"DEBUG","name":"DEBUG","value":"ENV[\"DEBUG\"]?","doc":null,"summary":null},{"id":"EPOCH","name":"EPOCH","value":"Time.unix(1574467200)","doc":null,"summary":null},{"id":"Log","name":"Log","value":"::Log.for(\"stackcoin\")","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Api","path":"StackCoin/Api.html","kind":"class","full_name":"StackCoin::Api","name":"Api","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/api.cr","line_number":6,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L6"},{"filename":"src/stackcoin/routes/auth.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L1"},{"filename":"src/stackcoin/routes/base.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L1"},{"filename":"src/stackcoin/routes/ledger.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L1"},{"filename":"src/stackcoin/routes/root.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/root.cr#L1"},{"filename":"src/stackcoin/routes/user.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/user.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(config:Config,bank:Bank,stats:Statistics,auth:StackCoin::Auth)-class-method","html_id":"new(config:Config,bank:Bank,stats:Statistics,auth:StackCoin::Auth)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"}],"args_string":"(config : Config, bank : Bank, stats : Statistics, auth : StackCoin::Auth)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L17","def":{"name":"new","args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(config, bank, stats, auth)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"run!-instance-method","html_id":"run!-instance-method","name":"run!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L32","def":{"name":"run!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.info do\n  \"Starting Kemal\"\nend\nKemal.run\n"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Api/Auth","path":"StackCoin/Api/Auth.html","kind":"class","full_name":"StackCoin::Api::Auth","name":"Auth","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},"ancestors":[{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/auth.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api","kind":"class","full_name":"StackCoin::Api","name":"Api"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"setup-instance-method","html_id":"setup-instance-method","name":"setup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L14","def":{"name":"setup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"post(\"/auth\") do |env|\n  if env.request.body\n  else\n    next\n  end\n  begin\n    auth_post_body = AuthPostBody.from_json(env.request.body.not_nil!)\n  rescue e : JSON::ParseException\n    halt(env, status_code: 403, response: json_error(\"Invalid JSON: #{e}\"))\n  end\n  auth_result = @auth.authenticate(auth_post_body.user_id, auth_post_body.token)\n  if !auth_result.is_a?(StackCoin::Auth::Result::Authenticated)\n    env.response.status_code = 401\n  end\n  auth_result.to_json\nend"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Api/Auth/AuthPostBody","path":"StackCoin/Api/Auth/AuthPostBody.html","kind":"class","full_name":"StackCoin::Api::Auth::AuthPostBody","name":"AuthPostBody","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/auth.cr","line_number":8,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L8"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api/Auth","kind":"class","full_name":"StackCoin::Api::Auth","name":"Auth"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L9","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"token:String-instance-method","html_id":"token:String-instance-method","name":"token","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L11","def":{"name":"token","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@token"}},{"id":"token=(token:String)-instance-method","html_id":"token=(token:String)-instance-method","name":"token=","doc":null,"summary":null,"abstract":false,"args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"args_string":"(token : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L11","def":{"name":"token=","args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@token = token"}},{"id":"user_id:UInt64-instance-method","html_id":"user_id:UInt64-instance-method","name":"user_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : UInt64","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L10","def":{"name":"user_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt64","visibility":"Public","body":"@user_id"}},{"id":"user_id=(user_id:UInt64)-instance-method","html_id":"user_id=(user_id:UInt64)-instance-method","name":"user_id=","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/auth.cr#L10","def":{"name":"user_id=","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@user_id = user_id"}}],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Api/Context","path":"StackCoin/Api/Context.html","kind":"class","full_name":"StackCoin::Api::Context","name":"Context","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/api.cr","line_number":7,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L7"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api","kind":"class","full_name":"StackCoin::Api","name":"Api"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(bank,stats,auth,config)-class-method","html_id":"new(bank,stats,auth,config)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":""},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":""},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":""},{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":""}],"args_string":"(bank, stats, auth, config)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L13","def":{"name":"new","args":[{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":""},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":""},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":""},{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(bank, stats, auth, config)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"auth:StackCoin::Auth-instance-method","html_id":"auth:StackCoin::Auth-instance-method","name":"auth","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : StackCoin::Auth","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L10","def":{"name":"auth","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"StackCoin::Auth","visibility":"Public","body":"@auth"}},{"id":"bank:Bank-instance-method","html_id":"bank:Bank-instance-method","name":"bank","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bank","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L8","def":{"name":"bank","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bank","visibility":"Public","body":"@bank"}},{"id":"config:Config-instance-method","html_id":"config:Config-instance-method","name":"config","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Config","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L11","def":{"name":"config","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Config","visibility":"Public","body":"@config"}},{"id":"stats:Statistics-instance-method","html_id":"stats:Statistics-instance-method","name":"stats","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Statistics","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/api.cr#L9","def":{"name":"stats","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Statistics","visibility":"Public","body":"@stats"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Api/Ledger","path":"StackCoin/Api/Ledger.html","kind":"class","full_name":"StackCoin::Api::Ledger","name":"Ledger","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},"ancestors":[{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/ledger.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api","kind":"class","full_name":"StackCoin::Api","name":"Api"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"setup-instance-method","html_id":"setup-instance-method","name":"setup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L15","def":{"name":"setup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"post(\"/ledger\") do |env|\n  if env.request.body\n  else\n    next\n  end\n  begin\n    ledger_post_body = LedgerPostBody.from_json(env.request.body.not_nil!)\n  rescue e : JSON::ParseException\n    halt(env, status_code: 403, response: json_error(\"Invalid JSON: #{e}\"))\n  end\n  access_token_valid = @auth.validate_access_token(env.request.headers[\"X-Access-Token\"])\n  if !access_token_valid.is_a?(StackCoin::Auth::Result::ValidAccessToken)\n    halt(env, status_code: 401, response: access_token_valid.to_json)\n  end\n  from_id = access_token_valid.user_id\n  result = @bank.transfer(from_id, ledger_post_body.to_id, ledger_post_body.amount)\n  if !result.is_a?(Bank::Result::TransferSuccess)\n    env.response.status_code = 403\n  end\n  result.to_json\nend"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Api/Ledger/LedgerPostBody","path":"StackCoin/Api/Ledger/LedgerPostBody.html","kind":"class","full_name":"StackCoin::Api::Ledger::LedgerPostBody","name":"LedgerPostBody","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/ledger.cr","line_number":9,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L9"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api/Ledger","kind":"class","full_name":"StackCoin::Api::Ledger","name":"Ledger"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L10","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"amount:Int32-instance-method","html_id":"amount:Int32-instance-method","name":"amount","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L12","def":{"name":"amount","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@amount"}},{"id":"amount=(amount:Int32)-instance-method","html_id":"amount=(amount:Int32)-instance-method","name":"amount=","doc":null,"summary":null,"abstract":false,"args":[{"name":"amount","doc":null,"default_value":"","external_name":"amount","restriction":"Int32"}],"args_string":"(amount : Int32)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L12","def":{"name":"amount=","args":[{"name":"amount","doc":null,"default_value":"","external_name":"amount","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@amount = amount"}},{"id":"to_id:UInt64-instance-method","html_id":"to_id:UInt64-instance-method","name":"to_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : UInt64","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L11","def":{"name":"to_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt64","visibility":"Public","body":"@to_id"}},{"id":"to_id=(to_id:UInt64)-instance-method","html_id":"to_id=(to_id:UInt64)-instance-method","name":"to_id=","doc":null,"summary":null,"abstract":false,"args":[{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":"UInt64"}],"args_string":"(to_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/ledger.cr#L11","def":{"name":"to_id=","args":[{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@to_id = to_id"}}],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Api/Root","path":"StackCoin/Api/Root.html","kind":"class","full_name":"StackCoin::Api::Root","name":"Root","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},"ancestors":[{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/root.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/root.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api","kind":"class","full_name":"StackCoin::Api","name":"Api"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/root.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"setup-instance-method","html_id":"setup-instance-method","name":"setup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/root.cr#L8","def":{"name":"setup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"get(\"/\") do |env|\n  if self.should_return_html(env)\n    next render(\"src/views/home.ecr\")\n  end\n  infos = Hash(String, Hash(String, Array(String) | Nil)).new\n  Route.list.each do |route|\n    infos[route.class.name] = route.info\n  end\n  infos.to_json\nend"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Api/Route","path":"StackCoin/Api/Route.html","kind":"class","full_name":"StackCoin::Api::Route","name":"Route","abstract":true,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/base.cr","line_number":4,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L4"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Api/Auth","kind":"class","full_name":"StackCoin::Api::Auth","name":"Auth"},{"html_id":"stackcoin/StackCoin/Api/Ledger","kind":"class","full_name":"StackCoin::Api::Ledger","name":"Ledger"},{"html_id":"stackcoin/StackCoin/Api/Root","kind":"class","full_name":"StackCoin::Api::Root","name":"Root"},{"html_id":"stackcoin/StackCoin/Api/User","kind":"class","full_name":"StackCoin::Api::User","name":"User"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api","kind":"class","full_name":"StackCoin::Api","name":"Api"},"doc":null,"summary":null,"class_methods":[{"id":"list:Array(Route)-class-method","html_id":"list:Array(Route)-class-method","name":"list","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Route)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L5","def":{"name":"list","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Route)","visibility":"Public","body":"@@list"}}],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L24","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"auth:StackCoin::Auth-instance-method","html_id":"auth:StackCoin::Auth-instance-method","name":"auth","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : StackCoin::Auth","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L21","def":{"name":"auth","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"StackCoin::Auth","visibility":"Public","body":"@auth"}},{"id":"auth=(auth:StackCoin::Auth)-instance-method","html_id":"auth=(auth:StackCoin::Auth)-instance-method","name":"auth=","doc":null,"summary":null,"abstract":false,"args":[{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"}],"args_string":"(auth : StackCoin::Auth)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L21","def":{"name":"auth=","args":[{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@auth = auth"}},{"id":"bank:Bank-instance-method","html_id":"bank:Bank-instance-method","name":"bank","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bank","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L19","def":{"name":"bank","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bank","visibility":"Public","body":"@bank"}},{"id":"bank=(bank:Bank)-instance-method","html_id":"bank=(bank:Bank)-instance-method","name":"bank=","doc":null,"summary":null,"abstract":false,"args":[{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"}],"args_string":"(bank : Bank)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L19","def":{"name":"bank=","args":[{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@bank = bank"}},{"id":"config:Config-instance-method","html_id":"config:Config-instance-method","name":"config","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Config","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L22","def":{"name":"config","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Config","visibility":"Public","body":"@config"}},{"id":"config=(config:Config)-instance-method","html_id":"config=(config:Config)-instance-method","name":"config=","doc":null,"summary":null,"abstract":false,"args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L22","def":{"name":"config=","args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@config = config"}},{"id":"info-instance-method","html_id":"info-instance-method","name":"info","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L36","def":{"name":"info","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{\"routes\" => @routes, \"requires_auth\" => @requires_auth}"}},{"id":"json_error(message)-instance-method","html_id":"json_error(message)-instance-method","name":"json_error","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L15","def":{"name":"json_error","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"\"{\\\"message\\\": \\\"#{message}\\\"}\""}},{"id":"requires_auth:Array(String)?-instance-method","html_id":"requires_auth:Array(String)?-instance-method","name":"requires_auth","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L34","def":{"name":"requires_auth","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | Nil","visibility":"Public","body":"@requires_auth"}},{"id":"requires_auth=(requires_auth:Array(String)?)-instance-method","html_id":"requires_auth=(requires_auth:Array(String)?)-instance-method","name":"requires_auth=","doc":null,"summary":null,"abstract":false,"args":[{"name":"requires_auth","doc":null,"default_value":"","external_name":"requires_auth","restriction":"Array(String) | Nil"}],"args_string":"(requires_auth : Array(String)?)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L34","def":{"name":"requires_auth=","args":[{"name":"requires_auth","doc":null,"default_value":"","external_name":"requires_auth","restriction":"Array(String) | Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@requires_auth = requires_auth"}},{"id":"routes:Array(String)-instance-method","html_id":"routes:Array(String)-instance-method","name":"routes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L33","def":{"name":"routes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@routes"}},{"id":"routes=(routes:Array(String))-instance-method","html_id":"routes=(routes:Array(String))-instance-method","name":"routes=","doc":null,"summary":null,"abstract":false,"args":[{"name":"routes","doc":null,"default_value":"","external_name":"routes","restriction":"Array(String)"}],"args_string":"(routes : Array(String))","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L33","def":{"name":"routes=","args":[{"name":"routes","doc":null,"default_value":"","external_name":"routes","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@routes = routes"}},{"id":"setup-instance-method","html_id":"setup-instance-method","name":"setup","doc":null,"summary":null,"abstract":true,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L43","def":{"name":"setup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"should_return_html(env)-instance-method","html_id":"should_return_html(env)-instance-method","name":"should_return_html","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L7","def":{"name":"should_return_html","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"headers = env.request.headers\nif headers.has_key?(\"Accept\")\n  return (headers[\"Accept\"].split(',')).includes?(\"text/html\")\nend\nfalse\n"}},{"id":"stats:Statistics-instance-method","html_id":"stats:Statistics-instance-method","name":"stats","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Statistics","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L20","def":{"name":"stats","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Statistics","visibility":"Public","body":"@stats"}},{"id":"stats=(stats:Statistics)-instance-method","html_id":"stats=(stats:Statistics)-instance-method","name":"stats=","doc":null,"summary":null,"abstract":false,"args":[{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"}],"args_string":"(stats : Statistics)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/base.cr#L20","def":{"name":"stats=","args":[{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@stats = stats"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Api/User","path":"StackCoin/Api/User.html","kind":"class","full_name":"StackCoin::Api::User","name":"User","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},"ancestors":[{"html_id":"stackcoin/StackCoin/Api/Route","kind":"class","full_name":"StackCoin::Api::Route","name":"Route"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/routes/user.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/user.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Api","kind":"class","full_name":"StackCoin::Api","name":"Api"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/user.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"setup-instance-method","html_id":"setup-instance-method","name":"setup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/routes/user.cr#L8","def":{"name":"setup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"get(\"/user/:id\") do |env|\n  id = env.params.url[\"id\"].to_u64?\n  if id.is_a?(Nil)\n    halt(env, status_code: 403)\n  end\n  bal = @bank.balance(id)\n  if bal.is_a?(Nil)\n    halt(env, status_code: 404)\n  end\n  user = Hash(String, String | Int32).new\n  user[\"id\"] = id.to_s\n  user[\"bal\"] = bal.to_s\n  if should_return_html(env)\n    next render(\"src/views/user.ecr\")\n  end\n  user.to_json\nend\nget(\"/user/\") do |env|\n  users = Hash(String, Hash(String, UInt64 | Int32)).new\n  @stats.all_balances.each do |id, balance|\n    users[id.to_s] = Hash(String, UInt64 | Int32).new\n    users[id.to_s][\"id\"] = id\n    users[id.to_s][\"bal\"] = balance\n  end\n  if should_return_html(env)\n    next render(\"src/views/users.ecr\")\n  end\n  users.to_json\nend\n"}}],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Auth","path":"StackCoin/Auth.html","kind":"class","full_name":"StackCoin::Auth","name":"Auth","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":4,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L4"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(db:DB::Database,bank:Bank,jwt_secret_key:String)-class-method","html_id":"new(db:DB::Database,bank:Bank,jwt_secret_key:String)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"},{"name":"jwt_secret_key","doc":null,"default_value":"","external_name":"jwt_secret_key","restriction":"String"}],"args_string":"(db : DB::Database, bank : Bank, jwt_secret_key : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L37","def":{"name":"new","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"},{"name":"jwt_secret_key","doc":null,"default_value":"","external_name":"jwt_secret_key","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(db, bank, jwt_secret_key)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"authenticate(user_id:UInt64,token:String)-instance-method","html_id":"authenticate(user_id:UInt64,token:String)-instance-method","name":"authenticate","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"},{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"args_string":"(user_id : UInt64, token : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L52","def":{"name":"authenticate","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"},{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@db.transaction do |tx|\n  cnn = tx.connection\n  token_exists = (cnn.query_one(\"SELECT EXISTS(SELECT 1 FROM token WHERE user_id = ?)\", user_id.to_s, as: Int)) == 1\n  if token_exists\n  else\n    return Result::NoSuchAccount.new(tx, \"No such account\")\n  end\n  db_token = cnn.query_one(\"SELECT token FROM token WHERE user_id = ?\", user_id.to_s, as: String)\n  if db_token == token\n  else\n    return Result::InvalidToken.new(tx, \"Invalid Token\")\n  end\nend\ninvalid_at = (Time.utc + 1.seconds).to_s(\"%Y-%m-%d %H:%M:%S %:z\")\npayload = {\"user_id\" => user_id, \"invalid_at\" => invalid_at}\naccess_token = JWT.encode(payload, @jwt_secret_key, JWT::Algorithm::HS256)\nResult::Authenticated.new(\"Authenticated\", access_token)\n"}},{"id":"create_account_with_token(user_id:UInt64)-instance-method","html_id":"create_account_with_token(user_id:UInt64)-instance-method","name":"create_account_with_token","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L40","def":{"name":"create_account_with_token","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"result = @bank.open_account(user_id)\nif !result.is_a?(Bank::Result::Success)\n  return result\nend\ntoken = Random::Secure.hex(32)\n@db.exec(\"INSERT INTO token VALUES (?, ?)\", user_id.to_s, token)\nResult::AccountCreated.new(\"Account created\", token)\n"}},{"id":"validate_access_token(access_token:String)-instance-method","html_id":"validate_access_token(access_token:String)-instance-method","name":"validate_access_token","doc":null,"summary":null,"abstract":false,"args":[{"name":"access_token","doc":null,"default_value":"","external_name":"access_token","restriction":"String"}],"args_string":"(access_token : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L77","def":{"name":"validate_access_token","args":[{"name":"access_token","doc":null,"default_value":"","external_name":"access_token","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"payload, header = JWT.decode(access_token, @jwt_secret_key, JWT::Algorithm::HS256)\ninvalid_at = Time.parse_utc(payload[\"invalid_at\"].as_s, \"%Y-%m-%d %H:%M:%S %z\")\nis_valid_access_token = invalid_at > Time.utc\nif !is_valid_access_token\n  return Result::InvalidAccessToken.new(\"Invalid access token\")\nend\nResult::ValidAccessToken.new(\"Valid access token\", payload[\"user_id\"].as_i64.to_u64)\n"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Auth/Result","path":"StackCoin/Auth/Result.html","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":5,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L5"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth","kind":"class","full_name":"StackCoin::Auth","name":"Auth"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Auth/Result/AccountCreated","path":"StackCoin/Auth/Result/AccountCreated.html","kind":"class","full_name":"StackCoin::Auth::Result::AccountCreated","name":"AccountCreated","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":6,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L6"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(message,token)-class-method","html_id":"new(message,token)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":""}],"args_string":"(message, token)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L9","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message, token)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L6","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"token:String-instance-method","html_id":"token:String-instance-method","name":"token","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L7","def":{"name":"token","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@token"}},{"id":"token=(token:String)-instance-method","html_id":"token=(token:String)-instance-method","name":"token=","doc":null,"summary":null,"abstract":false,"args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"args_string":"(token : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L7","def":{"name":"token=","args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@token = token"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Auth/Result/Authenticated","path":"StackCoin/Auth/Result/Authenticated.html","kind":"class","full_name":"StackCoin::Auth::Result::Authenticated","name":"Authenticated","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":13,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L13"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(message,access_token)-class-method","html_id":"new(message,access_token)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"access_token","doc":null,"default_value":"","external_name":"access_token","restriction":""}],"args_string":"(message, access_token)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L16","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"access_token","doc":null,"default_value":"","external_name":"access_token","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message, access_token)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L13","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"access_token:String-instance-method","html_id":"access_token:String-instance-method","name":"access_token","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L14","def":{"name":"access_token","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@access_token"}},{"id":"access_token=(access_token:String)-instance-method","html_id":"access_token=(access_token:String)-instance-method","name":"access_token=","doc":null,"summary":null,"abstract":false,"args":[{"name":"access_token","doc":null,"default_value":"","external_name":"access_token","restriction":"String"}],"args_string":"(access_token : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L14","def":{"name":"access_token=","args":[{"name":"access_token","doc":null,"default_value":"","external_name":"access_token","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@access_token = access_token"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Auth/Result/InvalidAccessToken","path":"StackCoin/Auth/Result/InvalidAccessToken.html","kind":"class","full_name":"StackCoin::Auth::Result::InvalidAccessToken","name":"InvalidAccessToken","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":27,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L27"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L27","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Auth/Result/InvalidToken","path":"StackCoin/Auth/Result/InvalidToken.html","kind":"class","full_name":"StackCoin::Auth::Result::InvalidToken","name":"InvalidToken","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":33,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L33"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L33","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Auth/Result/NoSuchAccount","path":"StackCoin/Auth/Result/NoSuchAccount.html","kind":"class","full_name":"StackCoin::Auth::Result::NoSuchAccount","name":"NoSuchAccount","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":30,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L30"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L30","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Auth/Result/ValidAccessToken","path":"StackCoin/Auth/Result/ValidAccessToken.html","kind":"class","full_name":"StackCoin::Auth::Result::ValidAccessToken","name":"ValidAccessToken","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/auth.cr","line_number":20,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L20"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(message,user_id)-class-method","html_id":"new(message,user_id)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":""}],"args_string":"(message, user_id)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L23","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message, user_id)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L20","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"user_id:UInt64-instance-method","html_id":"user_id:UInt64-instance-method","name":"user_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : UInt64","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/auth.cr#L21","def":{"name":"user_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt64","visibility":"Public","body":"@user_id"}}],"macros":[],"types":[]}]}]},{"html_id":"stackcoin/StackCoin/Bank","path":"StackCoin/Bank.html","kind":"class","full_name":"StackCoin::Bank","name":"Bank","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":4,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L4"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Statistics","kind":"class","full_name":"StackCoin::Statistics","name":"Statistics"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(db:DB::Database,banned:Banned)-class-method","html_id":"new(db:DB::Database,banned:Banned)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"},{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":"Banned"}],"args_string":"(db : DB::Database, banned : Banned)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L38","def":{"name":"new","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"},{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":"Banned"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(db, banned)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"balance(cnn:DB::Connection,user_id:UInt64)-instance-method","html_id":"balance(cnn:DB::Connection,user_id:UInt64)-instance-method","name":"balance","doc":null,"summary":null,"abstract":false,"args":[{"name":"cnn","doc":null,"default_value":"","external_name":"cnn","restriction":"DB::Connection"},{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(cnn : DB::Connection, user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L57","def":{"name":"balance","args":[{"name":"cnn","doc":null,"default_value":"","external_name":"cnn","restriction":"DB::Connection"},{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"cnn.query_one?(\"SELECT bal FROM balance WHERE user_id = ?\", user_id.to_s, as: Int32)"}},{"id":"balance(user_id:UInt64)-instance-method","html_id":"balance(user_id:UInt64)-instance-method","name":"balance","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L63","def":{"name":"balance","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@db.transaction do |tx|\n  bal = self.balance(tx.connection, user_id)\n  tx.commit\n  return bal\nend"}},{"id":"db:DB::Database-instance-method","html_id":"db:DB::Database-instance-method","name":"db","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : DB::Database","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L41","def":{"name":"db","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@db"}},{"id":"deposit_dole(user_id:UInt64)-instance-method","html_id":"deposit_dole(user_id:UInt64)-instance-method","name":"deposit_dole","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L71","def":{"name":"deposit_dole","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"bal = 0\nnow = Time.utc\n@db.transaction do |tx|\n  cnn = tx.connection\n  expect_one = cnn.query_one(\"SELECT EXISTS(SELECT 1 FROM last_given_dole WHERE user_id = ?)\", user_id.to_s, as: Int)\n  if expect_one == 0\n    return Result::NoSuchAccount.new(tx, \"No account to deposit dole to\")\n  end\n  last_given = Database.parse_time(cnn.query_one(\"SELECT time FROM last_given_dole WHERE user_id = ?\", user_id.to_s, as: String))\n  if last_given.day == now.day\n    time_till_rollver = HumanizeTime.distance_of_time_in_words(Time.utc.at_end_of_day - Time.utc, Time.utc)\n    return Result::PrematureDole.new(tx, \"Dole already received today, rollover in #{time_till_rollver}\")\n  end\n  self.deposit(cnn, user_id, @@dole_amount)\n  cnn.exec(\"UPDATE last_given_dole SET time = ? WHERE user_id = ?\", now, user_id.to_s)\n  bal = self.balance(cnn, user_id)\n  args = [] of DB::Any\n  args << user_id.to_s\n  args << bal\n  args << @@dole_amount\n  args << now\n  cnn.exec(\"INSERT INTO benefit(user_id, user_bal, amount, time) VALUES (?, ?, ?, ?)\", args: args)\nend\nResult::Success.new(\"#{@@dole_amount} StackCoin given, your balance is now #{bal}\")\n"}},{"id":"has_account(user_id:UInt64)-instance-method","html_id":"has_account(user_id:UInt64)-instance-method","name":"has_account","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L117","def":{"name":"has_account","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"0 < (@db.query_one(\"SELECT EXISTS(SELECT 1 FROM balance WHERE user_id = ?)\", user_id.to_s, as: Int))"}},{"id":"open_account(user_id:UInt64)-instance-method","html_id":"open_account(user_id:UInt64)-instance-method","name":"open_account","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L123","def":{"name":"open_account","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"initial_bal = 0\n@db.transaction do |tx|\n  cnn = tx.connection\n  expect_zero = cnn.query_one(\"SELECT EXISTS(SELECT 1 FROM balance WHERE user_id = ?)\", user_id.to_s, as: Int)\n  if expect_zero > 0\n    return Result::PreexistingAccount.new(tx, \"Account already open\")\n  end\n  cnn.exec(\"INSERT INTO balance VALUES (?, ?)\", user_id.to_s, initial_bal)\n  cnn.exec(\"INSERT INTO last_given_dole VALUES (?, ?)\", user_id.to_s, EPOCH)\nend\nResult::Success.new(\"Account created, initial balance is #{initial_bal}\")\n"}},{"id":"transfer(from_id:UInt64,to_id:UInt64,amount:Int32)-instance-method","html_id":"transfer(from_id:UInt64,to_id:UInt64,amount:Int32)-instance-method","name":"transfer","doc":null,"summary":null,"abstract":false,"args":[{"name":"from_id","doc":null,"default_value":"","external_name":"from_id","restriction":"UInt64"},{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":"UInt64"},{"name":"amount","doc":null,"default_value":"","external_name":"amount","restriction":"Int32"}],"args_string":"(from_id : UInt64, to_id : UInt64, amount : Int32)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L149","def":{"name":"transfer","args":[{"name":"from_id","doc":null,"default_value":"","external_name":"from_id","restriction":"UInt64"},{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":"UInt64"},{"name":"amount","doc":null,"default_value":"","external_name":"amount","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if from_id == to_id\n  return Result::TransferSelf.new(\"Can't transfer money to self\")\nend\nif amount > 0\nelse\n  return Result::InvalidAmount.new(\"Amount must be greater than zero\")\nend\nif amount > 100000\n  return Result::InvalidAmount.new(\"Amount can't be greater than 100000\")\nend\nif (@banned.is_banned(from_id)) || (@banned.is_banned(to_id))\n  return Result::BannedUser.new(\"Banned user mentioned in transaction\")\nend\nfrom_balance, to_balance = 0, 0\n@db.transaction do |tx|\n  cnn = tx.connection\n  from_balance = self.balance(cnn, from_id)\n  if !from_balance.is_a?(Int32)\n    return Result::NoSuchAccount.new(tx, \"You don't have an account yet\")\n  end\n  to_balance = self.balance(cnn, to_id)\n  if !to_balance.is_a?(Int32)\n    return Result::NoSuchAccount.new(tx, \"User doesn't have an account yet\")\n  end\n  if (from_balance - amount) < 0\n    return Result::InsufficientFunds.new(tx, \"Insufficient funds\")\n  end\n  from_balance = from_balance - amount\n  self.withdraw(cnn, from_id, amount)\n  to_balance = to_balance + amount\n  self.deposit(cnn, to_id, amount)\n  args = [] of DB::Any\n  args << from_id.to_s\n  args << from_balance\n  args << to_id.to_s\n  args << to_balance\n  args << amount\n  args << Time.utc\n  cnn.exec(\"INSERT INTO ledger(\\n  from_id, from_bal, to_id, to_bal, amount, time\\n) VALUES (\\n  ?, ?, ?, ?, ?, ?\\n)\", args: args)\nend\nResult::TransferSuccess.new(\"Transfer sucessful\", from_balance, to_balance)\n"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Bank/Result","path":"StackCoin/Bank/Result.html","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":5,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L5"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank","kind":"class","full_name":"StackCoin::Bank","name":"Bank"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Bank/Result/BannedUser","path":"StackCoin/Bank/Result/BannedUser.html","kind":"class","full_name":"StackCoin::Bank::Result::BannedUser","name":"BannedUser","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":32,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L32"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L32","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/InsufficientFunds","path":"StackCoin/Bank/Result/InsufficientFunds.html","kind":"class","full_name":"StackCoin::Bank::Result::InsufficientFunds","name":"InsufficientFunds","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":29,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L29"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L29","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/InvalidAmount","path":"StackCoin/Bank/Result/InvalidAmount.html","kind":"class","full_name":"StackCoin::Bank::Result::InvalidAmount","name":"InvalidAmount","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":26,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L26"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L26","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/NoSuchAccount","path":"StackCoin/Bank/Result/NoSuchAccount.html","kind":"class","full_name":"StackCoin::Bank::Result::NoSuchAccount","name":"NoSuchAccount","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":17,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L17"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L17","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/PreexistingAccount","path":"StackCoin/Bank/Result/PreexistingAccount.html","kind":"class","full_name":"StackCoin::Bank::Result::PreexistingAccount","name":"PreexistingAccount","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":14,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L14"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L14","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/PrematureDole","path":"StackCoin/Bank/Result/PrematureDole.html","kind":"class","full_name":"StackCoin::Bank::Result::PrematureDole","name":"PrematureDole","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":20,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L20"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L20","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/TransferSelf","path":"StackCoin/Bank/Result/TransferSelf.html","kind":"class","full_name":"StackCoin::Bank::Result::TransferSelf","name":"TransferSelf","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":23,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L23"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L23","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bank/Result/TransferSuccess","path":"StackCoin/Bank/Result/TransferSuccess.html","kind":"class","full_name":"StackCoin::Bank::Result::TransferSuccess","name":"TransferSuccess","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"},{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bank.cr","line_number":6,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L6"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(message,from_bal,to_bal)-class-method","html_id":"new(message,from_bal,to_bal)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"from_bal","doc":null,"default_value":"","external_name":"from_bal","restriction":""},{"name":"to_bal","doc":null,"default_value":"","external_name":"to_bal","restriction":""}],"args_string":"(message, from_bal, to_bal)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L10","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"from_bal","doc":null,"default_value":"","external_name":"from_bal","restriction":""},{"name":"to_bal","doc":null,"default_value":"","external_name":"to_bal","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message, from_bal, to_bal)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L6","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"from_bal:Int32-instance-method","html_id":"from_bal:Int32-instance-method","name":"from_bal","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L7","def":{"name":"from_bal","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@from_bal"}},{"id":"from_bal=(from_bal:Int32)-instance-method","html_id":"from_bal=(from_bal:Int32)-instance-method","name":"from_bal=","doc":null,"summary":null,"abstract":false,"args":[{"name":"from_bal","doc":null,"default_value":"","external_name":"from_bal","restriction":"Int32"}],"args_string":"(from_bal : Int32)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L7","def":{"name":"from_bal=","args":[{"name":"from_bal","doc":null,"default_value":"","external_name":"from_bal","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@from_bal = from_bal"}},{"id":"to_bal:Int32-instance-method","html_id":"to_bal:Int32-instance-method","name":"to_bal","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L8","def":{"name":"to_bal","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@to_bal"}},{"id":"to_bal=(to_bal:Int32)-instance-method","html_id":"to_bal=(to_bal:Int32)-instance-method","name":"to_bal=","doc":null,"summary":null,"abstract":false,"args":[{"name":"to_bal","doc":null,"default_value":"","external_name":"to_bal","restriction":"Int32"}],"args_string":"(to_bal : Int32)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bank.cr#L8","def":{"name":"to_bal=","args":[{"name":"to_bal","doc":null,"default_value":"","external_name":"to_bal","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@to_bal = to_bal"}}],"macros":[],"types":[]}]}]},{"html_id":"stackcoin/StackCoin/Banned","path":"StackCoin/Banned.html","kind":"class","full_name":"StackCoin::Banned","name":"Banned","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/banned.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/banned.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(db:DB::Database)-class-method","html_id":"new(db:DB::Database)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"args_string":"(db : DB::Database)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/banned.cr#L2","def":{"name":"new","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(db)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"ban(user_id:UInt64)-instance-method","html_id":"ban(user_id:UInt64)-instance-method","name":"ban","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/banned.cr#L22","def":{"name":"ban","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.info do\n  \"Banning '#{user_id}'\"\nend\n@banned_users << user_id\n@db.exec(\"INSERT INTO banned VALUES (?)\", args: [user_id.to_s])\n"}},{"id":"is_banned(user_id:UInt64)-instance-method","html_id":"is_banned(user_id:UInt64)-instance-method","name":"is_banned","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/banned.cr#L18","def":{"name":"is_banned","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@banned_users.includes?(user_id)"}},{"id":"unban(user_id:UInt64)-instance-method","html_id":"unban(user_id:UInt64)-instance-method","name":"unban","doc":null,"summary":null,"abstract":false,"args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"args_string":"(user_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/banned.cr#L31","def":{"name":"unban","args":[{"name":"user_id","doc":null,"default_value":"","external_name":"user_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.info do\n  \"Unbanning '#{user_id}'\"\nend\n@banned_users.delete(user_id)\n@db.exec(\"DELETE FROM banned WHERE user_id = ?\", args: [user_id.to_s])\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot","path":"StackCoin/Bot.html","kind":"class","full_name":"StackCoin::Bot","name":"Bot","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bot.cr","line_number":6,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L6"},{"filename":"src/stackcoin/commands/auth.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/auth.cr#L1"},{"filename":"src/stackcoin/commands/bal.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/bal.cr#L1"},{"filename":"src/stackcoin/commands/ban.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ban.cr#L1"},{"filename":"src/stackcoin/commands/base.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L1"},{"filename":"src/stackcoin/commands/circulation.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/circulation.cr#L1"},{"filename":"src/stackcoin/commands/dole.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/dole.cr#L1"},{"filename":"src/stackcoin/commands/graph.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/graph.cr#L1"},{"filename":"src/stackcoin/commands/help.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L1"},{"filename":"src/stackcoin/commands/leaderboard.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/leaderboard.cr#L1"},{"filename":"src/stackcoin/commands/ledger.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ledger.cr#L1"},{"filename":"src/stackcoin/commands/mark.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/mark.cr#L1"},{"filename":"src/stackcoin/commands/open.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/open.cr#L1"},{"filename":"src/stackcoin/commands/send.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/send.cr#L1"},{"filename":"src/stackcoin/commands/unban.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/unban.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[{"id":"cleaned_message_content(prefix,message_content)-class-method","html_id":"cleaned_message_content(prefix,message_content)-class-method","name":"cleaned_message_content","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":""},{"name":"message_content","doc":null,"default_value":"","external_name":"message_content","restriction":""}],"args_string":"(prefix, message_content)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L36","def":{"name":"cleaned_message_content","args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":""},{"name":"message_content","doc":null,"default_value":"","external_name":"message_content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"cleaned = (message_content.strip.split(' ')).select do |i|\n  i != \"\"\nend\ncleaned[0] = (Bot.simplified_message_content_for_parsing(cleaned[0])).lchop(prefix)\nif (cleaned[0] == \"\") && cleaned.size >= 2\n  cleaned.shift\n  cleaned[0] = cleaned[0].downcase.lchop(prefix)\nend\ncleaned\n"}},{"id":"simplified_message_content_for_parsing(message_content)-class-method","html_id":"simplified_message_content_for_parsing(message_content)-class-method","name":"simplified_message_content_for_parsing","doc":null,"summary":null,"abstract":false,"args":[{"name":"message_content","doc":null,"default_value":"","external_name":"message_content","restriction":""}],"args_string":"(message_content)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L32","def":{"name":"simplified_message_content_for_parsing","args":[{"name":"message_content","doc":null,"default_value":"","external_name":"message_content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"message_content.downcase.gsub(\"$\", \"s\")"}}],"constructors":[{"id":"new(config:Config,bank:Bank,stats:Statistics,auth:StackCoin::Auth,banned:Banned,designated_channel:StackCoin::DesignatedChannel)-class-method","html_id":"new(config:Config,bank:Bank,stats:Statistics,auth:StackCoin::Auth,banned:Banned,designated_channel:StackCoin::DesignatedChannel)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"},{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":"Banned"},{"name":"designated_channel","doc":null,"default_value":"","external_name":"designated_channel","restriction":"StackCoin::DesignatedChannel"}],"args_string":"(config : Config, bank : Bank, stats : Statistics, auth : StackCoin::Auth, banned : Banned, designated_channel : StackCoin::DesignatedChannel)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L49","def":{"name":"new","args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"},{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":"Banned"},{"name":"designated_channel","doc":null,"default_value":"","external_name":"designated_channel","restriction":"StackCoin::DesignatedChannel"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(config, bank, stats, auth, banned, designated_channel)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"run!-instance-method","html_id":"run!-instance-method","name":"run!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L130","def":{"name":"run!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.info do\n  \"Running Discord client\"\nend\n@client.run\n"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Bot/Auth","path":"StackCoin/Bot/Auth.html","kind":"class","full_name":"StackCoin::Bot::Auth","name":"Auth","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/auth.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/auth.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/auth.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/auth.cr#L10","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if message.author.id != @config.owner_id\n  return Result::Error.new(@client, message, \"Command only for use by bots owner!\")\nend\nmentions = Discord::Mention.parse(message.content)\nif mentions.size != 2\n  return Result::Error.new(@client, message, \"Too many/little mentions in your message; two is expected\")\nend\nbot_user_mention = mentions[0]\nif !bot_user_mention.is_a?(Discord::Mention::User)\n  return Result::Error.new(@client, message, \"Mentioned a non-user entity in your message\")\nend\nif bot_user_mention.id.to_u64 == @config.client_id\n  return Result::Error.new(@client, message, \"StackCoin itself can't have an account with itself!\")\nend\nbot_user = @cache.resolve_user(bot_user_mention.id)\nif !bot_user.bot\n  return Result::Error.new(@client, message, \"Mentioned a non-bot user as the bot user in your message\")\nend\nbot_users_owner_mention = mentions[1]\nif !bot_users_owner_mention.is_a?(Discord::Mention::User)\n  return Result::Error.new(@client, message, \"Mentioned a non-user entity in your message\")\nend\nbot_users_owner = @cache.resolve_user(bot_users_owner_mention.id)\nif bot_users_owner.bot\n  return Result::Error.new(@client, message, \"Mentioned a bot user as the bot users owner in your message\")\nend\nresult = @auth.create_account_with_token(bot_user.id.to_u64)\nif !result.is_a?(StackCoin::Auth::Result::AccountCreated)\n  return Result::Error.new(@client, message, result.message)\nend\nbegin\n  private_channel = @client.create_dm(bot_users_owner.id)\n  response = \"Check your direct messages for a token from StackCoin :)\"\n  token_message = \"Here's your token to access the StackCoin API from #{bot_user.username}: ```#{result.token}```\"\n  send_msg(@client, private_channel.id, token_message)\nrescue Discord::CodeException\n  owner = @cache.resolve_user(@config.owner_id)\n  response = \"Direct message containing token failed to send (maybe you have DMs locked down?), ask #{owner.username} for your token instead :)\"\n  token_message = \"#{bot_users_owner.username}##{bot_users_owner.discriminator}'s (#{bot_users_owner.id}) token to access the StackCoin API: ```#{result.token}```\"\n  owners_private_channel = @client.create_dm(@config.owner_id)\n  send_msg(@client, owners_private_channel.id, token_message)\nend\nsend_emb(message, Discord::Embed.new(title: \"_Token-authenticated bot user initialized_:\", fields: [Discord::EmbedField.new(name: \"#{message.author.username}\", value: response)]))\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Bal","path":"StackCoin/Bot/Bal.html","kind":"class","full_name":"StackCoin::Bot::Bal","name":"Bal","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/bal.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/bal.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/bal.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/bal.cr#L10","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"mentions = Discord::Mention.parse(message.content)\nif mentions.size > 1\n  return Result::Error.new(@client, message, \"Too many mentions in your message; max is one\")\nend\nprefix = \"You don't\"\nuser = message.author\nbal = nil\nif mentions.size > 0\n  mention = mentions[0]\n  if !mention.is_a?(Discord::Mention::User)\n    return Result::Error.new(@client, message, \"Mentioned entity isn't a user!\")\n  end\n  user = @cache.resolve_user(mention.id)\n  bal = @bank.balance(mention.id.to_u64)\n  if mention.id != message.author.id\n    prefix = \"User doesn't\"\n  end\nelse\n  bal = @bank.balance(message.author.id.to_u64)\nend\nif bal.is_a?(Nil)\n  return Result::Error.new(@client, message, \"#{prefix} have an account, run #{@config.prefix}open to create an account\")\nend\nsend_emb(message, Discord::Embed.new(title: \"_Balance:_\", fields: [Discord::EmbedField.new(name: \"#{user.username}\", value: \"#{bal}\")]))\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Ban","path":"StackCoin/Bot/Ban.html","kind":"class","full_name":"StackCoin::Bot::Ban","name":"Ban","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/ban.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ban.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ban.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ban.cr#L10","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if message.author.id != @config.owner_id\n  return Result::Error.new(@client, message, \"Command only for use by bots owner!\")\nend\nmentions = Discord::Mention.parse(message.content)\nif mentions.size != 1\n  return Result::Error.new(@client, message, \"Too many/little mentions in your message; one is expected\")\nend\nuser_mention = mentions[0]\nif !user_mention.is_a?(Discord::Mention::User)\n  return Result::Error.new(@client, message, \"Mentioned a non-user entity in your message: #{user_mention}\")\nend\nuser_id = user_mention.id.to_u64\nis_banned = @banned.is_banned(user_id)\nif is_banned\n  return Result::Error.new(@client, message, \"User <@#{user_mention.id}> is already banned\")\nend\n@banned.ban(user_id)\nsend_msg(message, \" User <@#{user_mention.id}> banned \")\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Circulation","path":"StackCoin/Bot/Circulation.html","kind":"class","full_name":"StackCoin::Bot::Circulation","name":"Circulation","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/circulation.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/circulation.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/circulation.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/circulation.cr#L9","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"send_emb(message, Discord::Embed.new(title: \"_Total StackCoin in Circulation:_\", fields: [Discord::EmbedField.new(name: \"#{@stats.circulation} STK\", value: \"Since #{EPOCH}\")]))"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Command","path":"StackCoin/Bot/Command.html","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command","abstract":true,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/base.cr","line_number":4,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L4"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Bot/Auth","kind":"class","full_name":"StackCoin::Bot::Auth","name":"Auth"},{"html_id":"stackcoin/StackCoin/Bot/Bal","kind":"class","full_name":"StackCoin::Bot::Bal","name":"Bal"},{"html_id":"stackcoin/StackCoin/Bot/Ban","kind":"class","full_name":"StackCoin::Bot::Ban","name":"Ban"},{"html_id":"stackcoin/StackCoin/Bot/Circulation","kind":"class","full_name":"StackCoin::Bot::Circulation","name":"Circulation"},{"html_id":"stackcoin/StackCoin/Bot/Dole","kind":"class","full_name":"StackCoin::Bot::Dole","name":"Dole"},{"html_id":"stackcoin/StackCoin/Bot/Graph","kind":"class","full_name":"StackCoin::Bot::Graph","name":"Graph"},{"html_id":"stackcoin/StackCoin/Bot/Help","kind":"class","full_name":"StackCoin::Bot::Help","name":"Help"},{"html_id":"stackcoin/StackCoin/Bot/Leaderboard","kind":"class","full_name":"StackCoin::Bot::Leaderboard","name":"Leaderboard"},{"html_id":"stackcoin/StackCoin/Bot/Ledger","kind":"class","full_name":"StackCoin::Bot::Ledger","name":"Ledger"},{"html_id":"stackcoin/StackCoin/Bot/Mark","kind":"class","full_name":"StackCoin::Bot::Mark","name":"Mark"},{"html_id":"stackcoin/StackCoin/Bot/Open","kind":"class","full_name":"StackCoin::Bot::Open","name":"Open"},{"html_id":"stackcoin/StackCoin/Bot/Send","kind":"class","full_name":"StackCoin::Bot::Send","name":"Send"},{"html_id":"stackcoin/StackCoin/Bot/Unban","kind":"class","full_name":"StackCoin::Bot::Unban","name":"Unban"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[{"id":"lookup:Hash(String,Command)-class-method","html_id":"lookup:Hash(String,Command)-class-method","name":"lookup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Command)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L5","def":{"name":"lookup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, Command)","visibility":"Public","body":"@@lookup"}}],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L19","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"auth:StackCoin::Auth-instance-method","html_id":"auth:StackCoin::Auth-instance-method","name":"auth","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : StackCoin::Auth","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L14","def":{"name":"auth","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"StackCoin::Auth","visibility":"Public","body":"@auth"}},{"id":"auth=(auth:StackCoin::Auth)-instance-method","html_id":"auth=(auth:StackCoin::Auth)-instance-method","name":"auth=","doc":null,"summary":null,"abstract":false,"args":[{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"}],"args_string":"(auth : StackCoin::Auth)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L14","def":{"name":"auth=","args":[{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":"StackCoin::Auth"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@auth = auth"}},{"id":"bank:Bank-instance-method","html_id":"bank:Bank-instance-method","name":"bank","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bank","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L12","def":{"name":"bank","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bank","visibility":"Public","body":"@bank"}},{"id":"bank=(bank:Bank)-instance-method","html_id":"bank=(bank:Bank)-instance-method","name":"bank=","doc":null,"summary":null,"abstract":false,"args":[{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"}],"args_string":"(bank : Bank)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L12","def":{"name":"bank=","args":[{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":"Bank"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@bank = bank"}},{"id":"banned:Banned-instance-method","html_id":"banned:Banned-instance-method","name":"banned","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Banned","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L15","def":{"name":"banned","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Banned","visibility":"Public","body":"@banned"}},{"id":"banned=(banned:Banned)-instance-method","html_id":"banned=(banned:Banned)-instance-method","name":"banned=","doc":null,"summary":null,"abstract":false,"args":[{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":"Banned"}],"args_string":"(banned : Banned)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L15","def":{"name":"banned=","args":[{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":"Banned"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@banned = banned"}},{"id":"cache:Discord::Cache-instance-method","html_id":"cache:Discord::Cache-instance-method","name":"cache","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Cache","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L11","def":{"name":"cache","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Discord::Cache","visibility":"Public","body":"@cache"}},{"id":"cache=(cache:Discord::Cache)-instance-method","html_id":"cache=(cache:Discord::Cache)-instance-method","name":"cache=","doc":null,"summary":null,"abstract":false,"args":[{"name":"cache","doc":null,"default_value":"","external_name":"cache","restriction":"Discord::Cache"}],"args_string":"(cache : Discord::Cache)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L11","def":{"name":"cache=","args":[{"name":"cache","doc":null,"default_value":"","external_name":"cache","restriction":"Discord::Cache"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@cache = cache"}},{"id":"client:Discord::Client-instance-method","html_id":"client:Discord::Client-instance-method","name":"client","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Client","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L10","def":{"name":"client","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Discord::Client","visibility":"Public","body":"@client"}},{"id":"client=(client:Discord::Client)-instance-method","html_id":"client=(client:Discord::Client)-instance-method","name":"client=","doc":null,"summary":null,"abstract":false,"args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":"Discord::Client"}],"args_string":"(client : Discord::Client)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L10","def":{"name":"client=","args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":"Discord::Client"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@client = client"}},{"id":"config:Config-instance-method","html_id":"config:Config-instance-method","name":"config","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Config","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L17","def":{"name":"config","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Config","visibility":"Public","body":"@config"}},{"id":"config=(config:Config)-instance-method","html_id":"config=(config:Config)-instance-method","name":"config=","doc":null,"summary":null,"abstract":false,"args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L17","def":{"name":"config=","args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@config = config"}},{"id":"desc:String-instance-method","html_id":"desc:String-instance-method","name":"desc","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L9","def":{"name":"desc","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@desc"}},{"id":"designated_channel:DesignatedChannel-instance-method","html_id":"designated_channel:DesignatedChannel-instance-method","name":"designated_channel","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : DesignatedChannel","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L16","def":{"name":"designated_channel","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"DesignatedChannel","visibility":"Public","body":"@designated_channel"}},{"id":"designated_channel=(designated_channel:DesignatedChannel)-instance-method","html_id":"designated_channel=(designated_channel:DesignatedChannel)-instance-method","name":"designated_channel=","doc":null,"summary":null,"abstract":false,"args":[{"name":"designated_channel","doc":null,"default_value":"","external_name":"designated_channel","restriction":"DesignatedChannel"}],"args_string":"(designated_channel : DesignatedChannel)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L16","def":{"name":"designated_channel=","args":[{"name":"designated_channel","doc":null,"default_value":"","external_name":"designated_channel","restriction":"DesignatedChannel"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@designated_channel = designated_channel"}},{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":true,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L54","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"send_emb(message,content,emb:Discord::Embed)-instance-method","html_id":"send_emb(message,content,emb:Discord::Embed)-instance-method","name":"send_emb","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""},{"name":"emb","doc":null,"default_value":"","external_name":"emb","restriction":"Discord::Embed"}],"args_string":"(message, content, emb : Discord::Embed)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L44","def":{"name":"send_emb","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""},{"name":"emb","doc":null,"default_value":"","external_name":"emb","restriction":"Discord::Embed"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"emb.colour = 16773120\nemb.timestamp = Time.utc\nemb.footer = Discord::EmbedFooter.new(text: \"StackCoin\", icon_url: \"https://i.imgur.com/CsVxtvM.png\")\n@client.create_message(message.channel_id, content, emb)\n"}},{"id":"send_emb(message,emb:Discord::Embed)-instance-method","html_id":"send_emb(message,emb:Discord::Embed)-instance-method","name":"send_emb","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"emb","doc":null,"default_value":"","external_name":"emb","restriction":"Discord::Embed"}],"args_string":"(message, emb : Discord::Embed)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L40","def":{"name":"send_emb","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"emb","doc":null,"default_value":"","external_name":"emb","restriction":"Discord::Embed"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.send_emb(message, \"\", emb)"}},{"id":"send_msg(message,channel_id,content)-instance-method","html_id":"send_msg(message,channel_id,content)-instance-method","name":"send_msg","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"channel_id","doc":null,"default_value":"","external_name":"channel_id","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"args_string":"(message, channel_id, content)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L36","def":{"name":"send_msg","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"channel_id","doc":null,"default_value":"","external_name":"channel_id","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@client.create_message(channel_id, content)"}},{"id":"send_msg(message,content)-instance-method","html_id":"send_msg(message,content)-instance-method","name":"send_msg","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"args_string":"(message, content)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L32","def":{"name":"send_msg","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@client.create_message(message.channel_id, content)"}},{"id":"stats:Statistics-instance-method","html_id":"stats:Statistics-instance-method","name":"stats","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Statistics","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L13","def":{"name":"stats","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Statistics","visibility":"Public","body":"@stats"}},{"id":"stats=(stats:Statistics)-instance-method","html_id":"stats=(stats:Statistics)-instance-method","name":"stats=","doc":null,"summary":null,"abstract":false,"args":[{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"}],"args_string":"(stats : Statistics)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L13","def":{"name":"stats=","args":[{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":"Statistics"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@stats = stats"}},{"id":"trigger:String-instance-method","html_id":"trigger:String-instance-method","name":"trigger","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L7","def":{"name":"trigger","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@trigger"}},{"id":"usage:String?-instance-method","html_id":"usage:String?-instance-method","name":"usage","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/base.cr#L8","def":{"name":"usage","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | Nil","visibility":"Public","body":"@usage"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Context","path":"StackCoin/Bot/Context.html","kind":"class","full_name":"StackCoin::Bot::Context","name":"Context","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bot.cr","line_number":18,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L18"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(client,cache,bank,stats,auth,banned,designated_channel,config)-class-method","html_id":"new(client,cache,bank,stats,auth,banned,designated_channel,config)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":""},{"name":"cache","doc":null,"default_value":"","external_name":"cache","restriction":""},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":""},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":""},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":""},{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":""},{"name":"designated_channel","doc":null,"default_value":"","external_name":"designated_channel","restriction":""},{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":""}],"args_string":"(client, cache, bank, stats, auth, banned, designated_channel, config)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L28","def":{"name":"new","args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":""},{"name":"cache","doc":null,"default_value":"","external_name":"cache","restriction":""},{"name":"bank","doc":null,"default_value":"","external_name":"bank","restriction":""},{"name":"stats","doc":null,"default_value":"","external_name":"stats","restriction":""},{"name":"auth","doc":null,"default_value":"","external_name":"auth","restriction":""},{"name":"banned","doc":null,"default_value":"","external_name":"banned","restriction":""},{"name":"designated_channel","doc":null,"default_value":"","external_name":"designated_channel","restriction":""},{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(client, cache, bank, stats, auth, banned, designated_channel, config)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"auth:StackCoin::Auth-instance-method","html_id":"auth:StackCoin::Auth-instance-method","name":"auth","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : StackCoin::Auth","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L23","def":{"name":"auth","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"StackCoin::Auth","visibility":"Public","body":"@auth"}},{"id":"bank:Bank-instance-method","html_id":"bank:Bank-instance-method","name":"bank","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bank","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L21","def":{"name":"bank","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bank","visibility":"Public","body":"@bank"}},{"id":"banned:StackCoin::Banned-instance-method","html_id":"banned:StackCoin::Banned-instance-method","name":"banned","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : StackCoin::Banned","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L24","def":{"name":"banned","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"StackCoin::Banned","visibility":"Public","body":"@banned"}},{"id":"cache:Discord::Cache-instance-method","html_id":"cache:Discord::Cache-instance-method","name":"cache","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Cache","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L20","def":{"name":"cache","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Discord::Cache","visibility":"Public","body":"@cache"}},{"id":"client:Discord::Client-instance-method","html_id":"client:Discord::Client-instance-method","name":"client","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Client","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L19","def":{"name":"client","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Discord::Client","visibility":"Public","body":"@client"}},{"id":"config:Config-instance-method","html_id":"config:Config-instance-method","name":"config","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Config","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L26","def":{"name":"config","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Config","visibility":"Public","body":"@config"}},{"id":"designated_channel:StackCoin::DesignatedChannel-instance-method","html_id":"designated_channel:StackCoin::DesignatedChannel-instance-method","name":"designated_channel","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : StackCoin::DesignatedChannel","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L25","def":{"name":"designated_channel","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"StackCoin::DesignatedChannel","visibility":"Public","body":"@designated_channel"}},{"id":"stats:Statistics-instance-method","html_id":"stats:Statistics-instance-method","name":"stats","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Statistics","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L22","def":{"name":"stats","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Statistics","visibility":"Public","body":"@stats"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Dole","path":"StackCoin/Bot/Dole.html","kind":"class","full_name":"StackCoin::Bot::Dole","name":"Dole","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/dole.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/dole.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/dole.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/dole.cr#L22","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"send_msg(message, (@bank.deposit_dole(message.author.id.to_u64)).message)"}},{"id":"memes(message)-instance-method","html_id":"memes(message)-instance-method","name":"memes","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/dole.cr#L9","def":{"name":"memes","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"case message.author.id.to_u64\nwhen 134337759446958081_u64\nwhen 120571255635181568_u64\nwhen 140981598987354112_u64\nwhen 72073771468468224_u64\nwhen 72069821960822784_u64\nwhen 163415804761735170_u64\nwhen 636346308403134484_u64\nelse\nend"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Graph","path":"StackCoin/Bot/Graph.html","kind":"class","full_name":"StackCoin::Bot::Graph","name":"Graph","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/graph.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/graph.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/graph.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/graph.cr#L9","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"mentions = Discord::Mention.parse(message.content)\nif mentions.size > 1\n  return Result::Error.new(@client, message, \"Too many mentions in your message; max is one\")\nend\nprefix = \"You don't\"\nid = message.author.id\nuser = message.author\nif mentions.size > 0\n  mention = mentions[0]\n  if !mention.is_a?(Discord::Mention::User)\n    return Result::Error.new(@client, message, \"Mentioned entity isn't a user!\")\n  end\n  id = mention.id\n  user = @cache.resolve_user(mention.id)\n  if mention.id != message.author.id\n    prefix = \"User doesn't\"\n  end\nend\nid = id.to_u64\nif !(@bank.has_account(id))\n  return Result::Error.new(@client, message, \"#{prefix} have an account to see a graph of!\")\nend\nresult = @stats.graph(id)\nif result.is_a?(Statistics::Result::Graph::Success)\n  @client.upload_file(channel_id: message.channel_id, content: \"#{user.username}'s STK balance over time\", file: result.file)\n  result.file.delete\nelse\n  client.create_message(message.channel_id, result.message)\nend\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Help","path":"StackCoin/Bot/Help.html","kind":"class","full_name":"StackCoin::Bot::Help","name":"Help","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/help.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L6","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L35","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"msg_parts = Bot.cleaned_message_content(@config.prefix, message.content)\nif msg_parts.size > 2\n  return Result::Error.new(@client, message, \"Too many arguments in message, found #{msg_parts.size}\")\nend\nif msg_parts.size == 1\n  send_emb(message, @root_help)\nelse\n  command = msg_parts.last\n  if @sub_help.has_key?(command)\n    send_emb(message, @sub_help[command])\n  else\n    postfix = \"\"\n    potential = Levenshtein.find(command, @sub_help.keys)\n    if potential\n      postfix = \", did you mean #{potential}?\"\n    end\n    Result::Error.new(@client, message, \"Unknown help section: #{command}#{postfix}\")\n  end\nend\n"}},{"id":"root_help:Discord::Embed-instance-method","html_id":"root_help:Discord::Embed-instance-method","name":"root_help","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Embed","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L3","def":{"name":"root_help","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@root_help"}},{"id":"root_help=(root_help)-instance-method","html_id":"root_help=(root_help)-instance-method","name":"root_help=","doc":null,"summary":null,"abstract":false,"args":[{"name":"root_help","doc":null,"default_value":"","external_name":"root_help","restriction":""}],"args_string":"(root_help)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L3","def":{"name":"root_help=","args":[{"name":"root_help","doc":null,"default_value":"","external_name":"root_help","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@root_help = root_help"}},{"id":"sub_help:Hash(String,Discord::Embed)-instance-method","html_id":"sub_help:Hash(String,Discord::Embed)-instance-method","name":"sub_help","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Discord::Embed)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L4","def":{"name":"sub_help","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@sub_help"}},{"id":"sub_help=(sub_help)-instance-method","html_id":"sub_help=(sub_help)-instance-method","name":"sub_help=","doc":null,"summary":null,"abstract":false,"args":[{"name":"sub_help","doc":null,"default_value":"","external_name":"sub_help","restriction":""}],"args_string":"(sub_help)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/help.cr#L4","def":{"name":"sub_help=","args":[{"name":"sub_help","doc":null,"default_value":"","external_name":"sub_help","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@sub_help = sub_help"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Leaderboard","path":"StackCoin/Bot/Leaderboard.html","kind":"class","full_name":"StackCoin::Bot::Leaderboard","name":"Leaderboard","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/leaderboard.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/leaderboard.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/leaderboard.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/leaderboard.cr#L9","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"fields = [] of Discord::EmbedField\n@stats.leaderboard.each_with_index do |res, i|\n  user = @cache.resolve_user(res[0])\n  fields << Discord::EmbedField.new(name: \"##{i + 1}: #{user.username}\", value: \"Balance: #{res[1]}\")\nend\nsend_emb(message, Discord::Embed.new(title: \"_Leaderboard:_\", fields: fields))\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Ledger","path":"StackCoin/Bot/Ledger.html","kind":"class","full_name":"StackCoin::Bot::Ledger","name":"Ledger","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/ledger.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ledger.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ledger.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/ledger.cr#L10","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"dates = [] of String\nfrom_ids = [] of UInt64\nto_ids = [] of UInt64\nfields = [] of Discord::EmbedField\ncondition_context = [] of String\nyyy_mm_dd_regex = /([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/\nmatches = message.content.scan(yyy_mm_dd_regex)\nif matches.size > 1\n  return Result::Error.new(@client, message, \"Too many yyyy-mm-dd string in your message; max is one\")\nend\nif matches.size > 0\n  date = matches[0][1]\n  dates << date\n  condition_context << \"Occured on #{date}\"\nend\nmentions = Discord::Mention.parse(message.content)\nif mentions.size > 2\n  return Result::Error.new(@client, message, \"Too many mentions in your message; max is two\")\nend\nmentions.each do |mentioned|\n  if !mentioned.is_a?(Discord::Mention::User)\n    return Result::Error.new(@client, message, \"Mentioned a non-user entity in your message\")\n  else\n    from_ids << mentioned.id\n    to_ids << mentioned.id\n    condition_context << \"Mentions #{(@cache.resolve_user(mentioned.id)).username}\"\n  end\nend\nreport = @stats.ledger(dates, from_ids, to_ids)\nreport.results.each_with_index do |result, i|\n  begin\n    from = (@cache.resolve_user(result.from_id)).username\n  rescue Discord::CodeException\n    from = \"(?)\"\n  end\n  begin\n    to = (@cache.resolve_user(result.to_id)).username\n  rescue Discord::CodeException\n    to = \"(?)\"\n  end\n  fields << Discord::EmbedField.new(name: \"#{i + 1} - #{result.time}\", value: \"#{from} (#{result.from_bal})  #{to} (#{result.to_bal}) - #{result.amount} STK\")\nend\nif condition_context.size == 0\n  condition_context << \"Most recent\"\nend\nif fields.size == 0\n  fields << Discord::EmbedField.new(name: \"*crickets*\", value: \"Seems like no transactions were found in the ledger :(\")\nend\ntitle = \"_Searching ledger by_:\"\ncondition_context.each do |cond|\n  title = title + \"\\n- #{cond}\"\nend\nsend_emb(message, Discord::Embed.new(title: title, fields: fields))\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Mark","path":"StackCoin/Bot/Mark.html","kind":"class","full_name":"StackCoin::Bot::Mark","name":"Mark","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/mark.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/mark.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/mark.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/mark.cr#L9","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if message.author.id != @config.owner_id\n  return Result::Error.new(@client, message, \"Command only for use by bots owner!\")\nend\nguild_id = message.guild_id.not_nil!\nchannel_id = message.channel_id\n@designated_channel.mark(guild_id, channel_id)\nsend_msg(message, \"Channel <##{channel_id}> marked as the designated channel in this guild\")\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Open","path":"StackCoin/Bot/Open.html","kind":"class","full_name":"StackCoin::Bot::Open","name":"Open","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/open.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/open.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/open.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/open.cr#L9","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"send_msg(message, (@bank.open_account(message.author.id.to_u64)).message)"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Result","path":"StackCoin/Bot/Result.html","kind":"class","full_name":"StackCoin::Bot::Result","name":"Result","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bot.cr","line_number":7,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L7"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Bot/Result/Base","path":"StackCoin/Bot/Result/Base.html","kind":"class","full_name":"StackCoin::Bot::Result::Base","name":"Base","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bot.cr","line_number":8,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L8"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Bot/Result/Error","kind":"class","full_name":"StackCoin::Bot::Result::Error","name":"Error"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot/Result","kind":"class","full_name":"StackCoin::Bot::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(client,message,content)-class-method","html_id":"new(client,message,content)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":""},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"args_string":"(client, message, content)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L9","def":{"name":"new","args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":""},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(client, message, content)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Result/Error","path":"StackCoin/Bot/Result/Error.html","kind":"class","full_name":"StackCoin::Bot::Result::Error","name":"Error","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Result/Base","kind":"class","full_name":"StackCoin::Bot::Result::Base","name":"Base"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Result/Base","kind":"class","full_name":"StackCoin::Bot::Result::Base","name":"Base"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/bot.cr","line_number":14,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/bot.cr#L14"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot/Result","kind":"class","full_name":"StackCoin::Bot::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Bot/Send","path":"StackCoin/Bot/Send.html","kind":"class","full_name":"StackCoin::Bot::Send","name":"Send","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/send.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/send.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/send.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/send.cr#L10","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"mentions = Discord::Mention.parse(message.content)\nif mentions.size != 1\n  return Result::Error.new(@client, message, \"Too many/little mentions in your message; max is one\")\nend\nmention = mentions[0]\nif !mention.is_a?(Discord::Mention::User)\n  return Result::Error.new(@client, message, \"Mentioned a non-user entity in your message\")\nend\nmsg_parts = Bot.cleaned_message_content(@config.prefix, message.content)\nif msg_parts.size > 3\n  return Result::Error.new(@client, message, \"Too many arguments in message, found #{msg_parts.size}\")\nend\namount = msg_parts.last.to_i?\nif amount.is_a?(Nil)\n  return Result::Error.new(@client, message, \"Invalid amount: #{msg_parts.last}\")\nend\nresult = @bank.transfer(message.author.id.to_u64, mention.id, amount)\nif result.is_a?(Bank::Result::TransferSuccess)\n  to = @cache.resolve_user(mention.id)\n  send_emb(message, Discord::Embed.new(title: \"_Transaction complete_:\", fields: [Discord::EmbedField.new(name: \"#{message.author.username}\", value: \"New bal: #{result.from_bal}\"), Discord::EmbedField.new(name: \"#{to.username}\", value: \"New bal: #{result.to_bal}\")]))\nelse\n  Result::Error.new(@client, message, result.message)\nend\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Bot/Unban","path":"StackCoin/Bot/Unban.html","kind":"class","full_name":"StackCoin::Bot::Unban","name":"Unban","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bot/Command","kind":"class","full_name":"StackCoin::Bot::Command","name":"Command"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/commands/unban.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/unban.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Bot","kind":"class","full_name":"StackCoin::Bot","name":"Bot"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(context:Context)-class-method","html_id":"new(context:Context)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"args_string":"(context : Context)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/unban.cr#L3","def":{"name":"new","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":"Context"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(context)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"invoke(message)-instance-method","html_id":"invoke(message)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/commands/unban.cr#L10","def":{"name":"invoke","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if message.author.id != @config.owner_id\n  return Result::Error.new(@client, message, \"Command only for use by bots owner!\")\nend\nmentions = Discord::Mention.parse(message.content)\nif mentions.size != 1\n  return Result::Error.new(@client, message, \"Too many/little mentions in your message; one is expected\")\nend\nuser_mention = mentions[0]\nif !user_mention.is_a?(Discord::Mention::User)\n  return Result::Error.new(@client, message, \"Mentioned a non-user entity in your message: #{user_mention}\")\nend\nuser_id = user_mention.id.to_u64\nis_banned = @banned.is_banned(user_id)\nif !is_banned\n  return Result::Error.new(@client, message, \"User <@#{user_mention.id}> is not banned\")\nend\n@banned.unban(user_id)\nsend_msg(message, \" User <@#{user_mention.id}> unbanned \")\n"}}],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Config","path":"StackCoin/Config.html","kind":"class","full_name":"StackCoin::Config","name":"Config","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/config.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[{"id":"from_env-class-method","html_id":"from_env-class-method","name":"from_env","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L10","def":{"name":"from_env","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.info do\n  \"Configuring bot from environment variables\"\nend\nconfig = Config.new\nconfig.token = \"Bot #{ENV[\"STACKCOIN_DISCORD_TOKEN\"]}\"\nconfig.client_id = ENV[\"STACKCOIN_DISCORD_CLIENT_ID\"].to_u64\nconfig.prefix = ENV[\"STACKCOIN_PREFIX\"]\nconfig.test_guild_snowflake = Discord::Snowflake.new(ENV[\"STACKCOIN_TEST_GUILD_SNOWFLAKE\"])\nconfig.database_url = ENV[\"STACKCOIN_DATABASE_URL\"]\nconfig.jwt_secret_key = ENV[\"STACKCOIN_JWT_SECRET_KEY\"]\nconfig.owner_id = Discord::Snowflake.new(ENV[\"STACKCOIN_OWNER_ID\"])\nconfig\n"}}],"constructors":[],"instance_methods":[{"id":"client_id:UInt64-instance-method","html_id":"client_id:UInt64-instance-method","name":"client_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : UInt64","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L3","def":{"name":"client_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt64","visibility":"Public","body":"@client_id"}},{"id":"client_id=(client_id:UInt64)-instance-method","html_id":"client_id=(client_id:UInt64)-instance-method","name":"client_id=","doc":null,"summary":null,"abstract":false,"args":[{"name":"client_id","doc":null,"default_value":"","external_name":"client_id","restriction":"UInt64"}],"args_string":"(client_id : UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L3","def":{"name":"client_id=","args":[{"name":"client_id","doc":null,"default_value":"","external_name":"client_id","restriction":"UInt64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@client_id = client_id"}},{"id":"database_url:String-instance-method","html_id":"database_url:String-instance-method","name":"database_url","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L6","def":{"name":"database_url","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@database_url"}},{"id":"database_url=(database_url:String)-instance-method","html_id":"database_url=(database_url:String)-instance-method","name":"database_url=","doc":null,"summary":null,"abstract":false,"args":[{"name":"database_url","doc":null,"default_value":"","external_name":"database_url","restriction":"String"}],"args_string":"(database_url : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L6","def":{"name":"database_url=","args":[{"name":"database_url","doc":null,"default_value":"","external_name":"database_url","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@database_url = database_url"}},{"id":"jwt_secret_key:String-instance-method","html_id":"jwt_secret_key:String-instance-method","name":"jwt_secret_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L7","def":{"name":"jwt_secret_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@jwt_secret_key"}},{"id":"jwt_secret_key=(jwt_secret_key:String)-instance-method","html_id":"jwt_secret_key=(jwt_secret_key:String)-instance-method","name":"jwt_secret_key=","doc":null,"summary":null,"abstract":false,"args":[{"name":"jwt_secret_key","doc":null,"default_value":"","external_name":"jwt_secret_key","restriction":"String"}],"args_string":"(jwt_secret_key : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L7","def":{"name":"jwt_secret_key=","args":[{"name":"jwt_secret_key","doc":null,"default_value":"","external_name":"jwt_secret_key","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@jwt_secret_key = jwt_secret_key"}},{"id":"owner_id:Discord::Snowflake-instance-method","html_id":"owner_id:Discord::Snowflake-instance-method","name":"owner_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Snowflake","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L8","def":{"name":"owner_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Discord::Snowflake","visibility":"Public","body":"@owner_id"}},{"id":"owner_id=(owner_id:Discord::Snowflake)-instance-method","html_id":"owner_id=(owner_id:Discord::Snowflake)-instance-method","name":"owner_id=","doc":null,"summary":null,"abstract":false,"args":[{"name":"owner_id","doc":null,"default_value":"","external_name":"owner_id","restriction":"Discord::Snowflake"}],"args_string":"(owner_id : Discord::Snowflake)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L8","def":{"name":"owner_id=","args":[{"name":"owner_id","doc":null,"default_value":"","external_name":"owner_id","restriction":"Discord::Snowflake"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@owner_id = owner_id"}},{"id":"prefix:String-instance-method","html_id":"prefix:String-instance-method","name":"prefix","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L4","def":{"name":"prefix","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@prefix"}},{"id":"prefix=(prefix:String)-instance-method","html_id":"prefix=(prefix:String)-instance-method","name":"prefix=","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":"String"}],"args_string":"(prefix : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L4","def":{"name":"prefix=","args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@prefix = prefix"}},{"id":"test_guild_snowflake:Discord::Snowflake-instance-method","html_id":"test_guild_snowflake:Discord::Snowflake-instance-method","name":"test_guild_snowflake","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Discord::Snowflake","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L5","def":{"name":"test_guild_snowflake","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Discord::Snowflake","visibility":"Public","body":"@test_guild_snowflake"}},{"id":"test_guild_snowflake=(test_guild_snowflake:Discord::Snowflake)-instance-method","html_id":"test_guild_snowflake=(test_guild_snowflake:Discord::Snowflake)-instance-method","name":"test_guild_snowflake=","doc":null,"summary":null,"abstract":false,"args":[{"name":"test_guild_snowflake","doc":null,"default_value":"","external_name":"test_guild_snowflake","restriction":"Discord::Snowflake"}],"args_string":"(test_guild_snowflake : Discord::Snowflake)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L5","def":{"name":"test_guild_snowflake=","args":[{"name":"test_guild_snowflake","doc":null,"default_value":"","external_name":"test_guild_snowflake","restriction":"Discord::Snowflake"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@test_guild_snowflake = test_guild_snowflake"}},{"id":"token:String-instance-method","html_id":"token:String-instance-method","name":"token","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L2","def":{"name":"token","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@token"}},{"id":"token=(token:String)-instance-method","html_id":"token=(token:String)-instance-method","name":"token=","doc":null,"summary":null,"abstract":false,"args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"args_string":"(token : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/config.cr#L2","def":{"name":"token=","args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@token = token"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Database","path":"StackCoin/Database.html","kind":"class","full_name":"StackCoin::Database","name":"Database","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/db.cr","line_number":6,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/db.cr#L6"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"DB_INIT_SQL","name":"DB_INIT_SQL","value":"\"CREATE TABLE IF NOT EXISTS balance (\\n  user_id TEXT PRIMARY KEY,\\n  bal INTERGER\\n);\\n\\nCREATE TABLE IF NOT EXISTS banned (\\n  user_id TEXT PRIMARY KEY\\n);\\n\\n\\nCREATE TABLE IF NOT EXISTS designated_channel (\\n  guild_id TEXT PRIMARY KEY,\\n  channel_id TEXT NOT NULL\\n);\\n\\nCREATE TABLE IF NOT EXISTS token (\\n  user_id TEXT PRIMARY KEY,\\n  token TEXT\\n);\\n\\nCREATE TABLE IF NOT EXISTS ledger (\\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\\n  from_id TEXT,\\n  from_bal INTERGER,\\n  to_id TEXT,\\n  to_bal INTERGER,\\n  amount INTERGER,\\n  time INTERGER\\n);\\n\\nCREATE TABLE IF NOT EXISTS benefit (\\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\\n  user_id TEXT,\\n  user_bal INTERGER,\\n  amount INTERGER,\\n  time INTERGER\\n);\\n\\nCREATE TABLE IF NOT EXISTS last_given_dole (\\n  user_id TEXT PRIMARY KEY,\\n  time INTERGER\\n)\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[{"id":"parse_time(time)-class-method","html_id":"parse_time(time)-class-method","name":"parse_time","doc":null,"summary":null,"abstract":false,"args":[{"name":"time","doc":null,"default_value":"","external_name":"time","restriction":""}],"args_string":"(time)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/db.cr#L78","def":{"name":"parse_time","args":[{"name":"time","doc":null,"default_value":"","external_name":"time","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Time.parse(time, SQLite3::DATE_FORMAT, Time::Location::UTC)"}}],"constructors":[{"id":"new(config:Config,db:DB::Database)-class-method","html_id":"new(config:Config,db:DB::Database)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"},{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"args_string":"(config : Config, db : DB::Database)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/db.cr#L7","def":{"name":"new","args":[{"name":"config","doc":null,"default_value":"","external_name":"config","restriction":"Config"},{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(config, db)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"backup-instance-method","html_id":"backup-instance-method","name":"backup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/db.cr#L62","def":{"name":"backup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"db_file = @config.database_url.lchop(\"sqlite3://\")\nbackup_file = \"#{db_file}.backup.#{Time.utc}.gz\"\nLog.info do\n  \"gzipping #{db_file} to #{backup_file}...\"\nend\nFile.open(db_file, \"r\") do |database_file|\n  File.open(backup_file, \"w\") do |backup_file|\n    Compress::Gzip::Writer.open(backup_file) do |gzip|\n      IO.copy(database_file, gzip)\n    end\n  end\nend\nLog.info do\n  \"backup complete!\"\nend\n"}},{"id":"populate_tables(db)-instance-method","html_id":"populate_tables(db)-instance-method","name":"populate_tables","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":""}],"args_string":"(db)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/db.cr#L56","def":{"name":"populate_tables","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(DB_INIT_SQL.split(\";\")).each do |table_init_sql|\n  db.exec(table_init_sql)\nend"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/DesignatedChannel","path":"StackCoin/DesignatedChannel.html","kind":"class","full_name":"StackCoin::DesignatedChannel","name":"DesignatedChannel","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/designated_channel.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/designated_channel.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(db:DB::Database)-class-method","html_id":"new(db:DB::Database)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"args_string":"(db : DB::Database)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/designated_channel.cr#L2","def":{"name":"new","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(db)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"for_guild(guild_id:Discord::Snowflake)-instance-method","html_id":"for_guild(guild_id:Discord::Snowflake)-instance-method","name":"for_guild","doc":null,"summary":null,"abstract":false,"args":[{"name":"guild_id","doc":null,"default_value":"","external_name":"guild_id","restriction":"Discord::Snowflake"}],"args_string":"(guild_id : Discord::Snowflake)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/designated_channel.cr#L27","def":{"name":"for_guild","args":[{"name":"guild_id","doc":null,"default_value":"","external_name":"guild_id","restriction":"Discord::Snowflake"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@designated_channels[guild_id]"}},{"id":"is_permitted_to_reply_in(guild_id:Discord::Snowflake,channel_id:Discord::Snowflake)-instance-method","html_id":"is_permitted_to_reply_in(guild_id:Discord::Snowflake,channel_id:Discord::Snowflake)-instance-method","name":"is_permitted_to_reply_in","doc":null,"summary":null,"abstract":false,"args":[{"name":"guild_id","doc":null,"default_value":"","external_name":"guild_id","restriction":"Discord::Snowflake"},{"name":"channel_id","doc":null,"default_value":"","external_name":"channel_id","restriction":"Discord::Snowflake"}],"args_string":"(guild_id : Discord::Snowflake, channel_id : Discord::Snowflake)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/designated_channel.cr#L19","def":{"name":"is_permitted_to_reply_in","args":[{"name":"guild_id","doc":null,"default_value":"","external_name":"guild_id","restriction":"Discord::Snowflake"},{"name":"channel_id","doc":null,"default_value":"","external_name":"channel_id","restriction":"Discord::Snowflake"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if permitted_channel = @designated_channels[guild_id]?\n  return permitted_channel == channel_id\nend\ntrue\n"}},{"id":"mark(guild_id:Discord::Snowflake,channel_id:Discord::Snowflake)-instance-method","html_id":"mark(guild_id:Discord::Snowflake,channel_id:Discord::Snowflake)-instance-method","name":"mark","doc":null,"summary":null,"abstract":false,"args":[{"name":"guild_id","doc":null,"default_value":"","external_name":"guild_id","restriction":"Discord::Snowflake"},{"name":"channel_id","doc":null,"default_value":"","external_name":"channel_id","restriction":"Discord::Snowflake"}],"args_string":"(guild_id : Discord::Snowflake, channel_id : Discord::Snowflake)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/designated_channel.cr#L31","def":{"name":"mark","args":[{"name":"guild_id","doc":null,"default_value":"","external_name":"guild_id","restriction":"Discord::Snowflake"},{"name":"channel_id","doc":null,"default_value":"","external_name":"channel_id","restriction":"Discord::Snowflake"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if permitted_channel = @designated_channels[guild_id]?\n  @designated_channels.delete(channel_id)\n  @db.exec(\"DELETE FROM designated_channel WHERE guild_id = ?\", args: [guild_id.to_s])\nend\nLog.info do\n  \"Marking '#{channel_id}' as the channel to be used for messages for '#{guild_id}'\"\nend\n@designated_channels[guild_id] = channel_id\n@db.exec(\"INSERT INTO designated_channel VALUES (?, ?)\", args: [guild_id.to_s, channel_id.to_s])\n"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Result","path":"StackCoin/Result.html","kind":"class","full_name":"StackCoin::Result","name":"Result","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/result.cr","line_number":1,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L1"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Auth/Result","kind":"class","full_name":"StackCoin::Auth::Result","name":"Result"},{"html_id":"stackcoin/StackCoin/Bank/Result","kind":"class","full_name":"StackCoin::Bank::Result","name":"Result"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Result/Base","path":"StackCoin/Result/Base.html","kind":"class","full_name":"StackCoin::Result::Base","name":"Base","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/result.cr","line_number":2,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L2"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Result/Error","kind":"class","full_name":"StackCoin::Result::Error","name":"Error"},{"html_id":"stackcoin/StackCoin/Result/Success","kind":"class","full_name":"StackCoin::Result::Success","name":"Success"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L3","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(message)-class-method","html_id":"new(message)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L9","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"error:String?-instance-method","html_id":"error:String?-instance-method","name":"error","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L6","def":{"name":"error","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@error"}},{"id":"error=(error:String?)-instance-method","html_id":"error=(error:String?)-instance-method","name":"error=","doc":null,"summary":null,"abstract":false,"args":[{"name":"error","doc":null,"default_value":"","external_name":"error","restriction":"String | ::Nil"}],"args_string":"(error : String?)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L6","def":{"name":"error=","args":[{"name":"error","doc":null,"default_value":"","external_name":"error","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@error = error"}},{"id":"message:String-instance-method","html_id":"message:String-instance-method","name":"message","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L5","def":{"name":"message","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@message"}},{"id":"message=(message:String)-instance-method","html_id":"message=(message:String)-instance-method","name":"message=","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":"String"}],"args_string":"(message : String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L5","def":{"name":"message=","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@message = message"}},{"id":"name-instance-method","html_id":"name-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L12","def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((self.class.name.split(\"::\")).last(1))[0]"}},{"id":"success:String?-instance-method","html_id":"success:String?-instance-method","name":"success","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L7","def":{"name":"success","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@success"}},{"id":"success=(success:String?)-instance-method","html_id":"success=(success:String?)-instance-method","name":"success=","doc":null,"summary":null,"abstract":false,"args":[{"name":"success","doc":null,"default_value":"","external_name":"success","restriction":"String | ::Nil"}],"args_string":"(success : String?)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L7","def":{"name":"success=","args":[{"name":"success","doc":null,"default_value":"","external_name":"success","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@success = success"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Result/Error","path":"StackCoin/Result/Error.html","kind":"class","full_name":"StackCoin::Result::Error","name":"Error","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/result.cr","line_number":28,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L28"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Auth/Result/InvalidAccessToken","kind":"class","full_name":"StackCoin::Auth::Result::InvalidAccessToken","name":"InvalidAccessToken"},{"html_id":"stackcoin/StackCoin/Auth/Result/InvalidToken","kind":"class","full_name":"StackCoin::Auth::Result::InvalidToken","name":"InvalidToken"},{"html_id":"stackcoin/StackCoin/Auth/Result/NoSuchAccount","kind":"class","full_name":"StackCoin::Auth::Result::NoSuchAccount","name":"NoSuchAccount"},{"html_id":"stackcoin/StackCoin/Bank/Result/BannedUser","kind":"class","full_name":"StackCoin::Bank::Result::BannedUser","name":"BannedUser"},{"html_id":"stackcoin/StackCoin/Bank/Result/InsufficientFunds","kind":"class","full_name":"StackCoin::Bank::Result::InsufficientFunds","name":"InsufficientFunds"},{"html_id":"stackcoin/StackCoin/Bank/Result/InvalidAmount","kind":"class","full_name":"StackCoin::Bank::Result::InvalidAmount","name":"InvalidAmount"},{"html_id":"stackcoin/StackCoin/Bank/Result/NoSuchAccount","kind":"class","full_name":"StackCoin::Bank::Result::NoSuchAccount","name":"NoSuchAccount"},{"html_id":"stackcoin/StackCoin/Bank/Result/PreexistingAccount","kind":"class","full_name":"StackCoin::Bank::Result::PreexistingAccount","name":"PreexistingAccount"},{"html_id":"stackcoin/StackCoin/Bank/Result/PrematureDole","kind":"class","full_name":"StackCoin::Bank::Result::PrematureDole","name":"PrematureDole"},{"html_id":"stackcoin/StackCoin/Bank/Result/TransferSelf","kind":"class","full_name":"StackCoin::Bank::Result::TransferSelf","name":"TransferSelf"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(db:DB::Transaction,message)-class-method","html_id":"new(db:DB::Transaction,message)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Transaction"},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(db : DB::Transaction, message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L33","def":{"name":"new","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Transaction"},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(db, message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L28","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(message)-class-method","html_id":"new(message)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L29","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Result/Success","path":"StackCoin/Result/Success.html","kind":"class","full_name":"StackCoin::Result::Success","name":"Success","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},"ancestors":[{"html_id":"stackcoin/StackCoin/Result/Base","kind":"class","full_name":"StackCoin::Result::Base","name":"Base"},{"html_id":"stackcoin/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/result.cr","line_number":17,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L17"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Auth/Result/AccountCreated","kind":"class","full_name":"StackCoin::Auth::Result::AccountCreated","name":"AccountCreated"},{"html_id":"stackcoin/StackCoin/Auth/Result/Authenticated","kind":"class","full_name":"StackCoin::Auth::Result::Authenticated","name":"Authenticated"},{"html_id":"stackcoin/StackCoin/Auth/Result/ValidAccessToken","kind":"class","full_name":"StackCoin::Auth::Result::ValidAccessToken","name":"ValidAccessToken"},{"html_id":"stackcoin/StackCoin/Bank/Result/TransferSuccess","kind":"class","full_name":"StackCoin::Bank::Result::TransferSuccess","name":"TransferSuccess"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Result","kind":"class","full_name":"StackCoin::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(db:DB::Transaction,message)-class-method","html_id":"new(db:DB::Transaction,message)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Transaction"},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(db : DB::Transaction, message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L22","def":{"name":"new","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Transaction"},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(db, message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L17","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(message)-class-method","html_id":"new(message)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/result.cr#L18","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Statistics","path":"StackCoin/Statistics.html","kind":"class","full_name":"StackCoin::Statistics","name":"Statistics","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Bank","kind":"class","full_name":"StackCoin::Bank","name":"Bank"},"ancestors":[{"html_id":"stackcoin/StackCoin/Bank","kind":"class","full_name":"StackCoin::Bank","name":"Bank"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":3,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L3"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin","kind":"module","full_name":"StackCoin","name":"StackCoin"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"all_balances-instance-method","html_id":"all_balances-instance-method","name":"all_balances","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L67","def":{"name":"all_balances","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.handle_balance_result_set(\"SELECT user_id, bal FROM balance\", nil)"}},{"id":"circulation-instance-method","html_id":"circulation-instance-method","name":"circulation","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L136","def":{"name":"circulation","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@db.query_one(\"SELECT SUM(bal) FROM balance\", as: Int64)"}},{"id":"graph(id)-instance-method","html_id":"graph(id)-instance-method","name":"graph","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"args_string":"(id)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L79","def":{"name":"graph","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"SELECT time, to_bal, amount FROM ledger\\nWHERE to_id = ?\\nUNION\\nSELECT time, user_bal, amount FROM benefit\\nWHERE user_id = ?\\nORDER BY time\"\nid = id.to_s\ndatapoints = 0\nreader, writer = IO.pipe\n@db.query(query, args: [id, id]) do |rs|\n  rs.each do\n    datapoints = datapoints + 1\n    time = rs.read(String)\n    bal = rs.read(Int32)\n    amount = rs.read(Int32)\n    writer.puts(\"#{time},#{bal},#{amount}\")\n  end\nend\nwriter.close\nif datapoints <= 1\n  return Result::Graph::Error.new(\"Not enough datapoints!\")\nend\nrandom = UUID.random\nimage_filename = \"/tmp/stackcoin/graph_#{id}_#{random}.png\"\ntitle = \"#{id} - #{Time.utc}\"\nprocess = Process.new(\"gnuplot\", [\"-e\", \"imagefilename='#{image_filename}';customtitle='#{title}'\", \"./src/gnuplot/graph.plt\"], input: reader, output: Process::Redirect::Pipe, error: Process::Redirect::Pipe)\nstdout = process.output.gets_to_end\nstderr = process.error.gets_to_end\nif stderr != \"\"\n  raise(stderr)\nend\nResult::Graph::Success.new(File.open(image_filename))\n"}},{"id":"leaderboard(limit=5)-instance-method","html_id":"leaderboard(limit=5)-instance-method","name":"leaderboard","doc":null,"summary":null,"abstract":false,"args":[{"name":"limit","doc":null,"default_value":"5","external_name":"limit","restriction":""}],"args_string":"(limit = <span class=\"n\">5</span>)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L73","def":{"name":"leaderboard","args":[{"name":"limit","doc":null,"default_value":"5","external_name":"limit","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.handle_balance_result_set(\"SELECT user_id, bal FROM balance ORDER BY bal DESC LIMIT ?\", [limit])"}},{"id":"ledger(dates,from_ids,to_ids,limit=5)-instance-method","html_id":"ledger(dates,from_ids,to_ids,limit=5)-instance-method","name":"ledger","doc":null,"summary":null,"abstract":false,"args":[{"name":"dates","doc":null,"default_value":"","external_name":"dates","restriction":""},{"name":"from_ids","doc":null,"default_value":"","external_name":"from_ids","restriction":""},{"name":"to_ids","doc":null,"default_value":"","external_name":"to_ids","restriction":""},{"name":"limit","doc":null,"default_value":"5","external_name":"limit","restriction":""}],"args_string":"(dates, from_ids, to_ids, limit = <span class=\"n\">5</span>)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L158","def":{"name":"ledger","args":[{"name":"dates","doc":null,"default_value":"","external_name":"dates","restriction":""},{"name":"from_ids","doc":null,"default_value":"","external_name":"from_ids","restriction":""},{"name":"to_ids","doc":null,"default_value":"","external_name":"to_ids","restriction":""},{"name":"limit","doc":null,"default_value":"5","external_name":"limit","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.debug do\n  \"Ledger arguments: #{dates}, #{from_ids}, #{to_ids}, #{limit}\"\nend\nargs = [] of DB::Any\nconditions = [] of String\nconditions << \"WHERE\"\noptional_conditions(dates, String, \"date(time) = date(?)\")\nif (from_ids.size != 0) || (to_ids.size != 0)\n  condition = \"AND\"\n  if (from_ids.size == 1) || (to_ids.size == 1)\n    condition = \"OR\"\n  end\n  conditions << \"(\"\n  optional_conditions(from_ids, UInt64, \"from_id = ?\", condition)\n  optional_conditions(to_ids, UInt64, \"to_id = ?\", condition)\n  conditions.pop\n  conditions << \")\"\n  conditions << \"AND\"\nend\nconditions.pop\nconditions_flat = \"\"\nconditions.each do |condition|\n  conditions_flat = conditions_flat + \" #{condition} \"\nend\nledger_query = \"SELECT from_id, from_bal, to_id, to_bal, amount, time\\nFROM ledger #{conditions_flat} ORDER BY time DESC LIMIT ?\"\nargs << limit\nLog.debug do\n  \"Ledger query: #{ledger_query} - #{args}\"\nend\nresults = [] of Result::Report::Transaction\n@db.query(ledger_query, args: args) do |rs|\n  rs.each do\n    results << (Result::Report::Transaction.new(*rs.read(String, Int32, String, Int32, Int32, String)))\n  end\nend\nResult::Report.new(dates, from_ids, to_ids, results)\n"}},{"id":"richest-instance-method","html_id":"richest-instance-method","name":"richest","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L130","def":{"name":"richest","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"richest = self.leaderboard(1)\nif richest.size == 0\n  return nil\nend\nrichest[0]\n"}}],"macros":[{"id":"optional_conditions(objs,type,condition,final=&quot;AND&quot;)-macro","html_id":"optional_conditions(objs,type,condition,final=&amp;quot;AND&amp;quot;)-macro","name":"optional_conditions","doc":null,"summary":null,"abstract":false,"args":[{"name":"objs","doc":null,"default_value":"","external_name":"objs","restriction":""},{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""},{"name":"condition","doc":null,"default_value":"","external_name":"condition","restriction":""},{"name":"final","doc":null,"default_value":"\"AND\"","external_name":"final","restriction":""}],"args_string":"(objs, type, condition, final = <span class=\"s\">&quot;AND&quot;</span>)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L142","def":{"name":"optional_conditions","args":[{"name":"objs","doc":null,"default_value":"","external_name":"objs","restriction":""},{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""},{"name":"condition","doc":null,"default_value":"","external_name":"condition","restriction":""},{"name":"final","doc":null,"default_value":"\"AND\"","external_name":"final","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    if \n{{ objs }}\n.size != 0\n      conditions << \"(\"\n      \n{{ objs }}\n.each do |obj|\n        if obj.is_a?(\n{{ type }}\n)\n          conditions << \n{{ condition }}\n\n          conditions << \"OR\"\n          args << obj.to_s\n        \nend\n      \nend\n      conditions.pop\n      conditions << \")\"\n      conditions << \n{{ final }}\n\n    \nend\n  \n"}}],"types":[{"html_id":"stackcoin/StackCoin/Statistics/Result","path":"StackCoin/Statistics/Result.html","kind":"class","full_name":"StackCoin::Statistics::Result","name":"Result","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":4,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L4"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics","kind":"class","full_name":"StackCoin::Statistics","name":"Statistics"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Statistics/Result/Base","path":"StackCoin/Statistics/Result/Base.html","kind":"class","full_name":"StackCoin::Statistics::Result::Base","name":"Base","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":5,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L5"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"stackcoin/StackCoin/Statistics/Result/Error","kind":"class","full_name":"StackCoin::Statistics::Result::Error","name":"Error"}],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result","kind":"class","full_name":"StackCoin::Statistics::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(client,message,content)-class-method","html_id":"new(client,message,content)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":""},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"args_string":"(client, message, content)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L6","def":{"name":"new","args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":""},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(client, message, content)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Statistics/Result/Error","path":"StackCoin/Statistics/Result/Error.html","kind":"class","full_name":"StackCoin::Statistics::Result::Error","name":"Error","abstract":false,"superclass":{"html_id":"stackcoin/StackCoin/Statistics/Result/Base","kind":"class","full_name":"StackCoin::Statistics::Result::Base","name":"Base"},"ancestors":[{"html_id":"stackcoin/StackCoin/Statistics/Result/Base","kind":"class","full_name":"StackCoin::Statistics::Result::Base","name":"Base"},{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":11,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L11"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result","kind":"class","full_name":"StackCoin::Statistics::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Statistics/Result/Graph","path":"StackCoin/Statistics/Result/Graph.html","kind":"class","full_name":"StackCoin::Statistics::Result::Graph","name":"Graph","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":14,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L14"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result","kind":"class","full_name":"StackCoin::Statistics::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Statistics/Result/Graph/Error","path":"StackCoin/Statistics/Result/Graph/Error.html","kind":"class","full_name":"StackCoin::Statistics::Result::Graph::Error","name":"Error","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":22,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L22"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result/Graph","kind":"class","full_name":"StackCoin::Statistics::Result::Graph","name":"Graph"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(message)-class-method","html_id":"new(message)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L25","def":{"name":"new","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"message:String-instance-method","html_id":"message:String-instance-method","name":"message","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L23","def":{"name":"message","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@message"}}],"macros":[],"types":[]},{"html_id":"stackcoin/StackCoin/Statistics/Result/Graph/Success","path":"StackCoin/Statistics/Result/Graph/Success.html","kind":"class","full_name":"StackCoin::Statistics::Result::Graph::Success","name":"Success","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":15,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L15"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result/Graph","kind":"class","full_name":"StackCoin::Statistics::Result::Graph","name":"Graph"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(file)-class-method","html_id":"new(file)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":""}],"args_string":"(file)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L18","def":{"name":"new","args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(file)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"file:File-instance-method","html_id":"file:File-instance-method","name":"file","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : File","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L16","def":{"name":"file","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"File","visibility":"Public","body":"@file"}}],"macros":[],"types":[]}]},{"html_id":"stackcoin/StackCoin/Statistics/Result/Report","path":"StackCoin/Statistics/Result/Report.html","kind":"class","full_name":"StackCoin::Statistics::Result::Report","name":"Report","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":30,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L30"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result","kind":"class","full_name":"StackCoin::Statistics::Result","name":"Result"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(date,from_id,to_id,results)-class-method","html_id":"new(date,from_id,to_id,results)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"date","doc":null,"default_value":"","external_name":"date","restriction":""},{"name":"from_id","doc":null,"default_value":"","external_name":"from_id","restriction":""},{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":""},{"name":"results","doc":null,"default_value":"","external_name":"results","restriction":""}],"args_string":"(date, from_id, to_id, results)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L51","def":{"name":"new","args":[{"name":"date","doc":null,"default_value":"","external_name":"date","restriction":""},{"name":"from_id","doc":null,"default_value":"","external_name":"from_id","restriction":""},{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":""},{"name":"results","doc":null,"default_value":"","external_name":"results","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(date, from_id, to_id, results)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"date:Array(String)-instance-method","html_id":"date:Array(String)-instance-method","name":"date","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L46","def":{"name":"date","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@date"}},{"id":"from_id:Array(UInt64)-instance-method","html_id":"from_id:Array(UInt64)-instance-method","name":"from_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L47","def":{"name":"from_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(UInt64)","visibility":"Public","body":"@from_id"}},{"id":"results:Array(Transaction)-instance-method","html_id":"results:Array(Transaction)-instance-method","name":"results","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Transaction)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L49","def":{"name":"results","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Transaction)","visibility":"Public","body":"@results"}},{"id":"to_id:Array(UInt64)-instance-method","html_id":"to_id:Array(UInt64)-instance-method","name":"to_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(UInt64)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L48","def":{"name":"to_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(UInt64)","visibility":"Public","body":"@to_id"}}],"macros":[],"types":[{"html_id":"stackcoin/StackCoin/Statistics/Result/Report/Transaction","path":"StackCoin/Statistics/Result/Report/Transaction.html","kind":"class","full_name":"StackCoin::Statistics::Result::Report::Transaction","name":"Transaction","abstract":false,"superclass":{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"stackcoin/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"stackcoin/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/stackcoin/statistics.cr","line_number":31,"url":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L31"}],"repository_name":"stackcoin","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"stackcoin/StackCoin/Statistics/Result/Report","kind":"class","full_name":"StackCoin::Statistics::Result::Report","name":"Report"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(from_id,from_bal,to_id,to_bal,amount,time)-class-method","html_id":"new(from_id,from_bal,to_id,to_bal,amount,time)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"from_id","doc":null,"default_value":"","external_name":"from_id","restriction":""},{"name":"from_bal","doc":null,"default_value":"","external_name":"from_bal","restriction":""},{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":""},{"name":"to_bal","doc":null,"default_value":"","external_name":"to_bal","restriction":""},{"name":"amount","doc":null,"default_value":"","external_name":"amount","restriction":""},{"name":"time","doc":null,"default_value":"","external_name":"time","restriction":""}],"args_string":"(from_id, from_bal, to_id, to_bal, amount, time)","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L39","def":{"name":"new","args":[{"name":"from_id","doc":null,"default_value":"","external_name":"from_id","restriction":""},{"name":"from_bal","doc":null,"default_value":"","external_name":"from_bal","restriction":""},{"name":"to_id","doc":null,"default_value":"","external_name":"to_id","restriction":""},{"name":"to_bal","doc":null,"default_value":"","external_name":"to_bal","restriction":""},{"name":"amount","doc":null,"default_value":"","external_name":"amount","restriction":""},{"name":"time","doc":null,"default_value":"","external_name":"time","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(from_id, from_bal, to_id, to_bal, amount, time)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"amount:Int32-instance-method","html_id":"amount:Int32-instance-method","name":"amount","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L36","def":{"name":"amount","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@amount"}},{"id":"from_bal:Int32-instance-method","html_id":"from_bal:Int32-instance-method","name":"from_bal","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L33","def":{"name":"from_bal","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@from_bal"}},{"id":"from_id:UInt64-instance-method","html_id":"from_id:UInt64-instance-method","name":"from_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : UInt64","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L32","def":{"name":"from_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt64","visibility":"Public","body":"@from_id"}},{"id":"time:Time-instance-method","html_id":"time:Time-instance-method","name":"time","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L37","def":{"name":"time","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time","visibility":"Public","body":"@time"}},{"id":"to_bal:Int32-instance-method","html_id":"to_bal:Int32-instance-method","name":"to_bal","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L35","def":{"name":"to_bal","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@to_bal"}},{"id":"to_id:UInt64-instance-method","html_id":"to_id:UInt64-instance-method","name":"to_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : UInt64","source_link":"https://github.com/jackharrhy/StackCoin/blob/aa1af14b894382571a4f2e590bc951c901b01d0b/src/stackcoin/statistics.cr#L34","def":{"name":"to_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UInt64","visibility":"Public","body":"@to_id"}}],"macros":[],"types":[]}]}]}]}]}]}})